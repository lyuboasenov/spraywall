"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8323],{8323:(le,C,u)=>{u.r(C),u.d(C,{RoutesModule:()=>ie});var v=u(177),y=u(4341),c=u(9364),b=u(8986),m=u(467),e=u(4438),_=u(5312);const R=_.c.api_base_uri+"boulders-5.json";let I=(()=>{var l;class n{constructor(){this.routeDifficulty=new Map,this.boulderDifficulty=new Map,this.boulderDifficulty.set(20,"3"),this.boulderDifficulty.set(25,"4-"),this.boulderDifficulty.set(30,"4"),this.boulderDifficulty.set(35,"4+"),this.boulderDifficulty.set(40,"5-"),this.boulderDifficulty.set(45,"5"),this.boulderDifficulty.set(50,"5+"),this.boulderDifficulty.set(55,"6A"),this.boulderDifficulty.set(60,"6A+"),this.boulderDifficulty.set(65,"6B"),this.boulderDifficulty.set(70,"6B+"),this.boulderDifficulty.set(75,"6C"),this.boulderDifficulty.set(80,"6C+"),this.boulderDifficulty.set(85,"7A"),this.boulderDifficulty.set(90,"7A+"),this.boulderDifficulty.set(95,"7B"),this.boulderDifficulty.set(100,"7B+"),this.boulderDifficulty.set(105,"7C"),this.boulderDifficulty.set(110,"7C+"),this.boulderDifficulty.set(115,"8A"),this.boulderDifficulty.set(120,"8A+"),this.boulderDifficulty.set(125,"8B"),this.boulderDifficulty.set(130,"8B+"),this.boulderDifficulty.set(135,"8C"),this.boulderDifficulty.set(140,"8C+"),this.boulderDifficulty.set(145,"9A"),this.routeDifficulty.set(20,"5b+"),this.routeDifficulty.set(25,"5c"),this.routeDifficulty.set(30,"5c+"),this.routeDifficulty.set(35,"6a"),this.routeDifficulty.set(40,"6a+"),this.routeDifficulty.set(45,"6b"),this.routeDifficulty.set(50,"6b+"),this.routeDifficulty.set(55,"6c"),this.routeDifficulty.set(60,"6c+"),this.routeDifficulty.set(65,"7a"),this.routeDifficulty.set(70,"7a+"),this.routeDifficulty.set(75,"7b"),this.routeDifficulty.set(80,"7b+"),this.routeDifficulty.set(85,"7c"),this.routeDifficulty.set(90,"7c+"),this.routeDifficulty.set(95,"8a"),this.routeDifficulty.set(100,"8a+"),this.routeDifficulty.set(105,"8b"),this.routeDifficulty.set(110,"8b+"),this.routeDifficulty.set(115,"8c"),this.routeDifficulty.set(120,"8c+"),this.routeDifficulty.set(125,"9a"),this.routeDifficulty.set(130,"9a+"),this.routeDifficulty.set(135,"9b"),this.routeDifficulty.set(140,"9b+"),this.routeDifficulty.set(145,"9c")}getAll(){var t=this;return(0,m.A)(function*(){var i;if(!t.routes){const s=yield fetch(R);t.routes=yield s.json()}return null!==(i=t.routes)&&void 0!==i?i:[]})()}getById(t){var i=this;return(0,m.A)(function*(){i.routes||(yield i.getAll());for(const a of null!==(s=i.routes)&&void 0!==s?s:[]){var s;if(a.Id===t)return a}return null})()}}return(l=n).\u0275fac=function(t){return new(t||l)},l.\u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),n})();var f=function(l){return l[l.Hold="Hold"]="Hold",l[l.StartingHold="StartingHold"]="StartingHold",l[l.FinishingHold="FinishingHold"]="FinishingHold",l[l.FootHold="FootHold"]="FootHold",l}(f||{});const k=_.c.api_base_uri+"template.json2024-04-04T19-44-35.json";let z=(()=>{var l;class n{constructor(){this._img=new Image,this._imgLoaded=!1,this._templateLoaded=!1,this.width=0,this.height=0,this._img.onload=t=>{this.width=this._img.width,this.height=this._img.height,this._imgLoaded=!0}}getTemplate(){var t=this;return(0,m.A)(function*(){var i,s,a;if(!t._template){const r=yield fetch(k);t._template=yield r.json()}return null!==(i=t._template)&&void 0!==i&&i.EncodedImage&&(t._img.src="data:image/jpeg;base64, "+(null===(a=t._template)||void 0===a?void 0:a.EncodedImage)),null!==(s=t._template)&&void 0!==s?s:null})()}markHolds(t,i,s){let a=s.getContext("2d");if(a&&t)for(let r=0;r<t.length;r++){const h=t[r];a.save(),a.beginPath(),a.moveTo(h.Contour[0].X,h.Contour[0].Y);for(let d=1;d<h.Contour.length;d++)a.lineTo(h.Contour[d].X,h.Contour[d].Y);a.lineTo(h.Contour[0].X,h.Contour[0].Y),a.closePath(),a.clip(),a.drawImage(this._img,0,0),a.restore(),a.save(),a.beginPath(),a.arc(h.Center.X,h.Center.Y,h.Radius+10,0,2*Math.PI,!0),a.closePath(),a.lineWidth=5,a.strokeStyle=h.Type==f.StartingHold?"#00FF00":h.Type==f.FinishingHold?"#FF0000":h.Type==f.FootHold?"#ffe066":"#00FFFF",a.stroke(),a.restore(),h==i&&(a.save(),a.beginPath(),a.arc(h.Center.X,h.Center.Y,h.Radius+20,0,2*Math.PI,!0),a.closePath(),a.lineWidth=5,a.strokeStyle=h.Type==f.StartingHold?"#00FF00":h.Type==f.FinishingHold?"#FF0000":h.Type==f.FootHold?"#ffe066":"#00FFFF",a.stroke(),a.restore())}}drawTemplateBackdrop(t){var i=this;return(0,m.A)(function*(){for(i._templateLoaded||(yield i.getTemplate());!i._imgLoaded;)yield new Promise(p=>setTimeout(p,500));t.width=i._img.width,t.height=i._img.height;var s=t.getContext("2d");if(s){s.save(),s.drawImage(i._img,0,0),s.restore(),s.save();for(var a=s.getImageData(0,0,i.width,i.height),r=a.data,h=0;h<r.length;h+=4){let p=.3;var d=.299*r[h]*p+.587*r[h+1]*p+.114*r[h+2]*p;r[h]=Math.round(d),r[h+1]=Math.round(d),r[h+2]=Math.round(d)}s.putImageData(a,0,0),s.restore()}})()}findHold(t,i){var s=this;return(0,m.A)(function*(){var a;if(null!==(a=s._template)&&void 0!==a&&a.Holds){var r;let p,h=null===(r=s._template)||void 0===r?void 0:r.Holds,d=null;return h.forEach(M=>{s.regionMatch(t,i,M.MinRect)&&(null==p||p>M.MinRect.Size.Width*M.MinRect.Size.Height)&&(d=M)}),d}return null})()}regionMatch(t,i,s){let a=s.Size.Width/2,r=s.Size.Height/2;return s.Center.X-a<t&&s.Center.X+a>t&&s.Center.Y-r<i&&s.Center.Y+r>i}}return(l=n).\u0275fac=function(t){return new(t||l)},l.\u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),n})();const Z=["*"];function j(l,n){if(1&l){const o=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.toggleZoom())}),e.k0s()}if(2&l){const o=e.XpG();e.AVh("pz-zoom-button-out",o.isZoomedIn)}}const S={transitionDuration:200,doubleTap:!0,doubleTapScale:2,limitZoom:"original image size",autoZoomOut:!1,zoomControlScale:1,minPanScale:1.0001,minScale:0,listeners:"mouse and touch",wheel:!0,wheelZoomFactor:.2,draggableImage:!1},w={"transition-duration":"transitionDuration",transitionDurationBackwardCompatibility:"transitionDuration","double-tap":"doubleTap",doubleTapBackwardCompatibility:"doubleTap","double-tap-scale":"doubleTapScale",doubleTapScaleBackwardCompatibility:"doubleTapScale","auto-zoom-out":"autoZoomOut",autoZoomOutBackwardCompatibility:"autoZoomOut","limit-zoom":"limitZoom",limitZoomBackwardCompatibility:"limitZoom"};class H{get touchListeners(){return this.properties.touchListeners?this.properties.touchListeners:this._touchListeners}get mouseListeners(){return this.properties.mouseListeners?this.properties.mouseListeners:this._mouseListeners}get otherListeners(){return this.properties.otherListeners?this.properties.otherListeners:this._otherListeners}constructor(n){this.eventType=void 0,this.handlers={},this.startX=0,this.startY=0,this.lastTap=0,this.doubleTapMinTimeout=300,this.tapMinTimeout=200,this.touchstartTime=0,this.i=0,this.isMousedown=!1,this._touchListeners={touchstart:"handleTouchstart",touchmove:"handleTouchmove",touchend:"handleTouchend"},this._mouseListeners={mousedown:"handleMousedown",mousemove:"handleMousemove",mouseup:"handleMouseup",wheel:"handleWheel"},this._otherListeners={resize:"handleResize"},this.handleTouchstart=o=>{this.elementPosition=this.getElementPosition(),this.touchstartTime=(new Date).getTime(),void 0===this.eventType&&this.getTouchstartPosition(o),this.runHandler("touchstart",o)},this.handleTouchmove=o=>{this.detectPan(o.touches)&&this.runHandler("pan",o),this.detectPinch(o)&&this.runHandler("pinch",o)},this.handleTouchend=o=>{const t=o.touches;this.detectDoubleTap()&&this.runHandler("double-tap",o),this.detectTap(),this.runHandler("touchend",o),this.eventType="touchend",t&&0===t.length&&(this.eventType=void 0,this.i=0)},this.handleMousedown=o=>{this.isMousedown=!0,this.elementPosition=this.getElementPosition(),this.touchstartTime=(new Date).getTime(),void 0===this.eventType&&this.getMousedownPosition(o),this.runHandler("mousedown",o)},this.handleMousemove=o=>{if(this.isMousedown){switch(this.runHandler("pan",o),this.detectLinearSwipe(o)){case"horizontal-swipe":o.swipeType="horizontal-swipe",this.runHandler("horizontal-swipe",o);break;case"vertical-swipe":o.swipeType="vertical-swipe",this.runHandler("vertical-swipe",o)}(this.detectLinearSwipe(o)||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)&&this.handleLinearSwipe(o)}},this.handleMouseup=o=>{this.detectTap(),this.isMousedown=!1,this.runHandler("mouseup",o),this.eventType=void 0,this.i=0},this.handleWheel=o=>{this.runHandler("wheel",o)},this.handleResize=o=>{this.runHandler("resize",o)},this.properties=n,this.element=this.properties.element,this.elementPosition=this.getElementPosition(),this.toggleEventListeners("addEventListener")}destroy(){this.toggleEventListeners("removeEventListener")}toggleEventListeners(n){let o;for(var t in o="mouse and touch"===this.properties.listeners?Object.assign(this.touchListeners,this.mouseListeners):this.detectTouchScreen()?this.touchListeners:this.mouseListeners,this.properties.resize&&(o=Object.assign(o,this.otherListeners)),o){const i=o[t];"resize"===t?("addEventListener"===n&&window.addEventListener(t,this[i],!1),"removeEventListener"===n&&window.removeEventListener(t,this[i],!1)):"mouseup"===t||"mousemove"===t?("addEventListener"===n&&document.addEventListener(t,this[i],!1),"removeEventListener"===n&&document.removeEventListener(t,this[i],!1)):("addEventListener"===n&&this.element.addEventListener(t,this[i],!1),"removeEventListener"===n&&this.element.removeEventListener(t,this[i],!1))}}addEventListeners(n){window.addEventListener(n,this[this._mouseListeners[n]],!1)}removeEventListeners(n){window.removeEventListener(n,this[this._mouseListeners[n]],!1)}handleLinearSwipe(n){this.i++,this.i>3&&(this.eventType=this.getLinearSwipeType(n)),"horizontal-swipe"===this.eventType&&this.runHandler("horizontal-swipe",n),"vertical-swipe"===this.eventType&&this.runHandler("vertical-swipe",n)}runHandler(n,o){this.handlers[n]&&this.handlers[n](o)}detectPan(n){return 1===n.length&&!this.eventType||"pan"===this.eventType}detectDoubleTap(){if(null!=this.eventType)return;const n=(new Date).getTime(),o=n-this.lastTap;if(clearTimeout(this.doubleTapTimeout),o<this.doubleTapMinTimeout&&o>0)return!0;this.doubleTapTimeout=setTimeout(()=>{clearTimeout(this.doubleTapTimeout)},this.doubleTapMinTimeout),this.lastTap=n}detectTap(){if(null!=this.eventType)return;const o=(new Date).getTime()-this.touchstartTime;o>0&&this.runHandler(o<this.tapMinTimeout?"tap":"longtap",{})}detectPinch(n){return 2===n.touches.length&&void 0===this.eventType||"pinch"===this.eventType}detectLinearSwipe(n){const o=n.touches;if(o){if(1===o.length&&!this.eventType||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)return this.getLinearSwipeType(n)}else if(!this.eventType||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)return this.getLinearSwipeType(n)}getLinearSwipeType(n){if("horizontal-swipe"!==this.eventType&&"vertical-swipe"!==this.eventType){const o=Math.abs(this.moveLeft(0,n)-this.startX);return 3*Math.abs(this.moveTop(0,n)-this.startY)>o?"vertical-swipe":"horizontal-swipe"}return this.eventType}getElementPosition(){return this.element.getBoundingClientRect()}getTouchstartPosition(n){this.startX=n.touches[0].clientX-this.elementPosition.left,this.startY=n.touches[0].clientY-this.elementPosition.top}getMousedownPosition(n){this.startX=n.clientX-this.elementPosition.left,this.startY=n.clientY-this.elementPosition.top}moveLeft(n,o){const t=o.touches;return t?t[n].clientX-this.elementPosition.left:o.clientX-this.elementPosition.left}moveTop(n,o){const t=o.touches;return t?t[n].clientY-this.elementPosition.top:o.clientY-this.elementPosition.top}detectTouchScreen(){var n=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window)return!0;var t=["(",n.join("touch-enabled),("),"heartz",")"].join("");return window.matchMedia(t).matches}on(n,o){n&&(this.handlers[n]=o)}}class L{get minPanScale(){return this.getPropertiesValue("minPanScale")}get fullImage(){return this.properties.fullImage}constructor(n){this.properties=S,this.i=0,this.scale=1,this.initialScale=1,this.startX=0,this.startY=0,this.moveX=0,this.moveY=0,this.initialMoveX=0,this.initialMoveY=0,this.moveXC=0,this.moveYC=0,this.lastTap=0,this.draggingMode=!1,this.distance=0,this.doubleTapTimeout=0,this.initialDistance=0,this.events={},this.defaultMaxScale=3,this.handleTouchstart=o=>{this.touches.addEventListeners("mousemove","handleMousemove"),this.getElementPosition(),void 0===this.eventType&&this.getTouchstartPosition(o)},this.handleTouchend=o=>{if("touchend"===o.type){this.i=0,this.draggingMode=!1;const t=o.touches;this.scale<1&&(this.scale=1),this.properties.autoZoomOut&&"pinch"===this.eventType&&(this.scale=1),("pinch"===this.eventType||"pan"===this.eventType&&this.scale>this.minPanScale)&&this.alignImage(),("pinch"===this.eventType||"pan"===this.eventType||"horizontal-swipe"===this.eventType||"vertical-swipe"===this.eventType)&&this.updateInitialValues(),this.eventType="touchend",t&&0===t.length&&(this.eventType=void 0)}"mouseup"===o.type&&(this.draggingMode=!1,this.updateInitialValues(),this.eventType=void 0),this.touches.removeEventListeners("mousemove","handleMousemove")},this.handlePan=o=>{if(this.scale<this.minPanScale||this.properties.disablePan)return;o.preventDefault();const{clientX:t,clientY:i}=this.getClientPosition(o);this.eventType||(this.startX=t-this.elementPosition.left,this.startY=i-this.elementPosition.top),this.eventType="pan",this.moveX=this.initialMoveX+(this.moveLeft(o,0)-this.startX),this.moveY=this.initialMoveY+(this.moveTop(o,0)-this.startY),this.properties.limitPan&&(this.limitPanY(),this.limitPanX()),"mousemove"===o.type&&this.scale>this.minPanScale&&this.centeringImage(),this.transformElement(0)},this.handleDoubleTap=o=>{this.toggleZoom(o)},this.handlePinch=o=>{if(o.preventDefault(),void 0===this.eventType||"pinch"===this.eventType){const t=o.touches;if(!this.eventType){this.initialDistance=this.getDistance(t);const i=this.moveLeft(o,0),s=this.moveLeft(o,1),a=this.moveTop(o,0),r=this.moveTop(o,1);this.moveXC=(i+s)/2-this.initialMoveX,this.moveYC=(a+r)/2-this.initialMoveY}this.eventType="pinch",this.distance=this.getDistance(t),this.scale=this.initialScale*(this.distance/this.initialDistance),this.moveX=this.initialMoveX-(this.distance/this.initialDistance*this.moveXC-this.moveXC),this.moveY=this.initialMoveY-(this.distance/this.initialDistance*this.moveYC-this.moveYC),this.handleLimitZoom(),this.properties.limitPan&&(this.limitPanY(),this.limitPanX()),this.transformElement(0)}},this.handleWheel=o=>{o.preventDefault();let t=this.properties.wheelZoomFactor||0,s=this.initialScale+(o.deltaY<0?t:-t);s<1+t?s=1:s<this.maxScale&&s>this.maxScale-t&&(s=this.maxScale),s<1||s>this.maxScale||s===this.scale||(this.getElementPosition(),this.scale=s,this.setZoom({scale:s,center:[o.clientX-this.elementPosition.left-this.initialMoveX,o.clientY-this.elementPosition.top-this.initialMoveY]}))},this.handleResize=o=>{this.setAutoHeight()},this.element=n.element,this.element&&("number"==typeof n.limitZoom&&(this.maxScale=n.limitZoom),this.elementTarget=this.element.querySelector("*").tagName,this.parentElement=this.element.parentElement,this.properties=Object.assign({},S,n),this.detectLimitZoom(),this.touches=new H({element:n.element,listeners:n.listeners,resize:n.autoHeight,mouseListeners:{mousedown:"handleMousedown",mouseup:"handleMouseup",wheel:"handleWheel"}}),this.setBasicStyles(),this.touches.on("touchstart",this.handleTouchstart),this.touches.on("touchend",this.handleTouchend),this.touches.on("mousedown",this.handleTouchstart),this.touches.on("mouseup",this.handleTouchend),this.touches.on("pan",this.handlePan),this.touches.on("mousemove",this.handlePan),this.touches.on("pinch",this.handlePinch),this.properties.wheel&&this.touches.on("wheel",this.handleWheel),this.properties.doubleTap&&this.touches.on("double-tap",this.handleDoubleTap),this.properties.autoHeight&&this.touches.on("resize",this.handleResize))}handleLimitZoom(){const n=this.maxScale,o=this.properties.minScale||0;if(this.scale>n||this.scale<=o){const t=this.getImageWidth(),i=this.getImageHeight(),r=this.moveX/(t*this.scale-t),h=this.moveY/(i*this.scale-i);this.scale>n&&(this.scale=n),this.scale<=o&&(this.scale=o);const p=i*this.scale;this.moveX=-Math.abs(r*(t*this.scale-t)),this.moveY=-Math.abs(-h*(p-i))}}moveLeft(n,o=0){return this.getClientPosition(n,o).clientX-this.elementPosition.left}moveTop(n,o=0){return this.getClientPosition(n,o).clientY-this.elementPosition.top}centeringImage(){const n=this.element.getElementsByTagName(this.elementTarget)[0],o=this.moveX,t=this.moveY;return this.moveY>0&&(this.moveY=0),this.moveX>0&&(this.moveX=0),n&&(this.limitPanY(),this.limitPanX()),n&&this.scale<1&&this.moveX<this.element.offsetWidth*(1-this.scale)&&(this.moveX=this.element.offsetWidth*(1-this.scale)),o!==this.moveX||t!==this.moveY}limitPanY(){const n=this.getImageHeight(),o=n*this.scale,t=this.parentElement.offsetHeight,i=this.element.offsetHeight;if(o<t)this.moveY=(t-i*this.scale)/2;else{const s=(n-i)*this.scale/2;this.moveY>s?this.moveY=s:o+Math.abs(s)-t+this.moveY<0&&(this.moveY=-(o+Math.abs(s)-t))}}limitPanX(){const n=this.getImageWidth(),o=n*this.scale,t=this.parentElement.offsetWidth,i=this.element.offsetWidth;if(o<t)this.moveX=(t-i*this.scale)/2;else{const s=(n-i)*this.scale/2;this.moveX>s?this.moveX=s:o+Math.abs(s)-t+this.moveX<0&&(this.moveX=-(n*this.scale+Math.abs(s)-t))}}setBasicStyles(){this.element.style.display="flex",this.element.style.alignItems="center",this.element.style.justifyContent="center",this.element.style.transformOrigin="0 0",this.setImageSize(),this.setDraggableImage()}removeBasicStyles(){this.element.style.display="",this.element.style.alignItems="",this.element.style.justifyContent="",this.element.style.transformOrigin="",this.removeImageSize(),this.removeDraggableImage()}setDraggableImage(){const n=this.getImageElement();n&&(n.draggable=this.properties.draggableImage)}removeDraggableImage(){const n=this.getImageElement();n&&(n.draggable=!0)}setImageSize(){const n=this.element.getElementsByTagName(this.elementTarget);n.length&&(n[0].style.maxWidth="100%",n[0].style.maxHeight="100%",this.setAutoHeight())}setAutoHeight(){const n=this.element.getElementsByTagName(this.elementTarget);if(!this.properties.autoHeight||!n.length)return;const o=n[0].getAttribute("width"),t=n[0].getAttribute("height");n[0].style.maxHeight=this.parentElement.offsetWidth/(o/t)+"px"}removeImageSize(){const n=this.element.getElementsByTagName(this.elementTarget);n.length&&(n[0].style.maxWidth="",n[0].style.maxHeight="")}getElementPosition(){this.elementPosition=this.element.parentElement.getBoundingClientRect()}getTouchstartPosition(n){const{clientX:o,clientY:t}=this.getClientPosition(n);this.startX=o-this.elementPosition.left,this.startY=t-this.elementPosition.top}getClientPosition(n,o=0){let t,i;return("touchstart"===n.type||"touchmove"===n.type)&&(t=n.touches[o].clientX,i=n.touches[o].clientY),("mousedown"===n.type||"mousemove"===n.type)&&(t=n.clientX,i=n.clientY),{clientX:t,clientY:i}}resetScale(){this.scale=1,this.moveX=0,this.moveY=0,this.updateInitialValues(),this.transformElement(this.properties.transitionDuration)}updateInitialValues(){this.initialScale=this.scale,this.initialMoveX=this.moveX,this.initialMoveY=this.moveY}getDistance(n){return Math.sqrt(Math.pow(n[0].pageX-n[1].pageX,2)+Math.pow(n[0].pageY-n[1].pageY,2))}getImageHeight(){return this.element.getElementsByTagName(this.elementTarget)[0].offsetHeight}getImageWidth(){return this.element.getElementsByTagName(this.elementTarget)[0].offsetWidth}transformElement(n){this.element.style.transition="all "+n+"ms",this.element.style.transform="matrix("+Number(this.scale)+", 0, 0, "+Number(this.scale)+", "+Number(this.moveX)+", "+Number(this.moveY)+")"}isTouchScreen(){const n=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window)return!0;const o=["(",n.join("touch-enabled),("),"heartz",")"].join("");return this.getMatchMedia(o)}getMatchMedia(n){return window.matchMedia(n).matches}isDragging(){if(this.properties.disablePan)return!1;const n=this.getImageHeight(),o=this.getImageWidth();return this.scale>1?n*this.scale>this.parentElement.offsetHeight||o*this.scale>this.parentElement.offsetWidth:1===this.scale?n>this.parentElement.offsetHeight||o>this.parentElement.offsetWidth:void 0}detectLimitZoom(){var n;null!==(n=this.maxScale)&&void 0!==n||(this.maxScale=this.defaultMaxScale),"original image size"===this.properties.limitZoom&&"IMG"===this.elementTarget&&this.pollLimitZoomForOriginalImage()}pollLimitZoomForOriginalImage(){let n=setInterval(()=>{let o=this.getMaxScaleForOriginalImage();"number"==typeof o&&(this.maxScale=o,clearInterval(n))},10)}getMaxScaleForOriginalImage(){let n,o=this.element.getElementsByTagName("img")[0];return o.naturalWidth&&o.offsetWidth&&(n=o.naturalWidth/o.offsetWidth),n}getImageElement(){const n=this.element.getElementsByTagName(this.elementTarget);if(n.length)return n[0]}toggleZoom(n=!1){if(1===this.initialScale){if(n&&n.changedTouches){if(void 0===this.properties.doubleTapScale)return;const o=n.changedTouches;this.scale=this.initialScale*this.properties.doubleTapScale,this.moveX=this.initialMoveX-(o[0].clientX-this.elementPosition.left)*(this.properties.doubleTapScale-1),this.moveY=this.initialMoveY-(o[0].clientY-this.elementPosition.top)*(this.properties.doubleTapScale-1)}else this.scale=this.initialScale*((this.properties.zoomControlScale||0)+1),this.moveX=this.initialMoveX-this.element.offsetWidth*(this.scale-1)/2,this.moveY=this.initialMoveY-this.element.offsetHeight*(this.scale-1)/2;this.centeringImage(),this.updateInitialValues(),this.transformElement(this.properties.transitionDuration)}else this.resetScale()}setZoom(n){this.scale=n.scale;let o,t,i=this.element.offsetWidth,a=i*this.scale/(i*this.initialScale);n.center?(o=n.center[0],t=n.center[1]):(o=i/2-this.initialMoveX,t=this.element.offsetHeight/2-this.initialMoveY),this.moveX=this.initialMoveX-(a*o-o),this.moveY=this.initialMoveY-(a*t-t),this.centeringImage(),this.updateInitialValues(),this.transformElement(this.properties.transitionDuration)}alignImage(){this.centeringImage()&&(this.updateInitialValues(),this.transformElement(this.properties.transitionDuration))}destroy(){this.removeBasicStyles(),this.touches.destroy()}getPropertiesValue(n){return this.properties&&this.properties[n]?this.properties[n]:S[n]}}const E={overflow:"hidden",disableZoomControl:"auto",backgroundColor:"rgba(0,0,0,0.85)"};let D=(()=>{var l;class n{set properties(t){t&&(this._properties=t)}get properties(){return this._properties}set transitionDurationBackwardCompatibility(t){t&&(this._transitionDuration=t)}set transitionDuration(t){t&&(this._transitionDuration=t)}get transitionDuration(){return this._transitionDuration}set doubleTapBackwardCompatibility(t){t&&(this._doubleTap=t)}set doubleTap(t){t&&(this._doubleTap=t)}get doubleTap(){return this._doubleTap}set doubleTapScaleBackwardCompatibility(t){t&&(this._doubleTapScale=t)}set doubleTapScale(t){t&&(this._doubleTapScale=t)}get doubleTapScale(){return this._doubleTapScale}set autoZoomOutBackwardCompatibility(t){t&&(this._autoZoomOut=t)}set autoZoomOut(t){t&&(this._autoZoomOut=t)}get autoZoomOut(){return this._autoZoomOut}set limitZoomBackwardCompatibility(t){t&&(this._limitZoom=t)}set limitZoom(t){t&&(this._limitZoom=t)}get limitZoom(){return this._limitZoom}get hostOverflow(){return this.properties.overflow}get hostBackgroundColor(){return this.properties.backgroundColor}get isTouchScreen(){var t=" -webkit- -moz- -o- -ms- ".split(" ");if("ontouchstart"in window)return!0;var s=["(",t.join("touch-enabled),("),"heartz",")"].join("");return window.matchMedia(s).matches}get isDragging(){return this.pinchZoom?this.pinchZoom.isDragging():void 0}get isDisabled(){return this.properties.disabled}get scale(){return this.pinchZoom.scale}get isZoomedIn(){return this.scale>1}get scaleLevel(){return Math.round(this.scale/this._zoomControlScale)}get maxScale(){return this.pinchZoom.maxScale}get isZoomLimitReached(){return this.scale>=this.maxScale}get _zoomControlScale(){return this.getPropertiesValue("zoomControlScale")}constructor(t){this.elementRef=t,this.defaultComponentProperties=this.getDefaultComponentProperties(),this.applyPropertiesDefault(this.defaultComponentProperties,{})}ngOnInit(){this.initPinchZoom(),this.detectLimitZoom()}ngOnChanges(t){let i=this.getProperties(t);i=this.renameProperties(i),this.applyPropertiesDefault(this.defaultComponentProperties,i)}ngOnDestroy(){this.destroy()}initPinchZoom(){this.properties.disabled||(this.properties.limitZoom=this.limitZoom,this.properties.element=this.elementRef.nativeElement.querySelector(".pinch-zoom-content"),this.pinchZoom=new L(this.properties))}getProperties(t){let i={};for(var s in t)"properties"!==s&&(i[s]=t[s].currentValue),"properties"===s&&(i=t[s].currentValue);return i}renameProperties(t){for(var i in t)w[i]&&(t[w[i]]=t[i],delete t[i]);return t}applyPropertiesDefault(t,i){this.properties=Object.assign({},t,i)}toggleZoom(){this.pinchZoom.toggleZoom()}isControl(){return!(this.isDisabled||"disable"===this.properties.disableZoomControl||this.isTouchScreen&&"auto"===this.properties.disableZoomControl)}detectLimitZoom(){this.pinchZoom&&this.pinchZoom.detectLimitZoom()}destroy(){this.pinchZoom&&this.pinchZoom.destroy()}getPropertiesValue(t){return this.properties&&this.properties[t]?this.properties[t]:this.defaultComponentProperties[t]}getDefaultComponentProperties(){return{...S,...E}}}return(l=n).\u0275fac=function(t){return new(t||l)(e.rXU(e.aKT))},l.\u0275cmp=e.VBU({type:l,selectors:[["pinch-zoom"],["","pinch-zoom",""]],hostVars:4,hostBindings:function(t,i){2&t&&e.xc7("overflow",i.hostOverflow)("background-color",i.hostBackgroundColor)},inputs:{properties:"properties",transitionDurationBackwardCompatibility:[e.Mj6.None,"transition-duration","transitionDurationBackwardCompatibility"],transitionDuration:"transitionDuration",doubleTapBackwardCompatibility:[e.Mj6.None,"double-tap","doubleTapBackwardCompatibility"],doubleTap:"doubleTap",doubleTapScaleBackwardCompatibility:[e.Mj6.None,"double-tap-scale","doubleTapScaleBackwardCompatibility"],doubleTapScale:"doubleTapScale",autoZoomOutBackwardCompatibility:[e.Mj6.None,"auto-zoom-out","autoZoomOutBackwardCompatibility"],autoZoomOut:"autoZoomOut",limitZoomBackwardCompatibility:[e.Mj6.None,"limit-zoom","limitZoomBackwardCompatibility"],limitZoom:"limitZoom",disabled:"disabled",disablePan:"disablePan",overflow:"overflow",zoomControlScale:"zoomControlScale",disableZoomControl:"disableZoomControl",backgroundColor:"backgroundColor",limitPan:"limitPan",minPanScale:"minPanScale",minScale:"minScale",listeners:"listeners",wheel:"wheel",autoHeight:"autoHeight",wheelZoomFactor:"wheelZoomFactor",draggableImage:"draggableImage"},exportAs:["pinchZoom"],features:[e.OA$],ngContentSelectors:Z,decls:3,vars:3,consts:[[1,"pinch-zoom-content"],["class","pz-zoom-button pz-zoom-control-position-bottom",3,"pz-zoom-button-out","click",4,"ngIf"],[1,"pz-zoom-button","pz-zoom-control-position-bottom",3,"click"]],template:function(t,i){1&t&&(e.NAR(),e.j41(0,"div",0),e.SdG(1),e.k0s(),e.DNE(2,j,1,2,"div",1)),2&t&&(e.AVh("pz-dragging",i.isDragging),e.R7$(2),e.Y8G("ngIf",i.isControl()))},dependencies:[v.bT],styles:["[_nghost-%COMP%]{position:relative;overflow:hidden;display:block}.pinch-zoom-content[_ngcontent-%COMP%]{height:inherit}.pz-dragging[_ngcontent-%COMP%]{cursor:all-scroll}.pz-zoom-button[_ngcontent-%COMP%]{position:absolute;z-index:1000;color:#fff;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE1LjUgMTRoLS43OWwtLjI4LS4yN0MxNS40MSAxMi41OSAxNiAxMS4xMSAxNiA5LjUgMTYgNS45MSAxMy4wOSAzIDkuNSAzUzMgNS45MSAzIDkuNSA1LjkxIDE2IDkuNSAxNmMxLjYxIDAgMy4wOS0uNTkgNC4yMy0xLjU3bC4yNy4yOHYuNzlsNSA0Ljk5TDIwLjQ5IDE5bC00Ljk5LTV6bS02IDBDNy4wMSAxNCA1IDExLjk5IDUgOS41UzcuMDEgNSA5LjUgNSAxNCA3LjAxIDE0IDkuNSAxMS45OSAxNCA5LjUgMTR6IiBpZD0ic3ZnXzEiIGNsYXNzPSIiIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMSIvPjxwYXRoIGQ9Ik0xMiAxMGgtMnYySDl2LTJIN1Y5aDJWN2gxdjJoMnYxeiIgaWQ9InN2Z18zIiBjbGFzcz0iIiBmaWxsPSIjZmZmZmZmIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PC9zdmc+),url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE1LjUgMTRoLS43OWwtLjI4LS4yN0MxNS40MSAxMi41OSAxNiAxMS4xMSAxNiA5LjUgMTYgNS45MSAxMy4wOSAzIDkuNSAzUzMgNS45MSAzIDkuNSA1LjkxIDE2IDkuNSAxNmMxLjYxIDAgMy4wOS0uNTkgNC4yMy0xLjU3bC4yNy4yOHYuNzlsNSA0Ljk5TDIwLjQ5IDE5bC00Ljk5LTV6bS02IDBDNy4wMSAxNCA1IDExLjk5IDUgOS41UzcuMDEgNSA5LjUgNSAxNCA3LjAxIDE0IDkuNSAxMS45OSAxNCA5LjUgMTR6TTcgOWg1djFIN3oiIGlkPSJzdmdfMiIgY2xhc3M9IiIgZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIi8+PC9nPjwvc3ZnPg==);background-color:#000c;background-position:center,-1000px;background-repeat:no-repeat,no-repeat;background-size:40px;width:56px;height:56px;border-radius:4px;opacity:.5;cursor:pointer;transition:opacity .1s;-webkit-user-select:none;user-select:none}.pz-zoom-button-out[_ngcontent-%COMP%]{background-position:-1000px,center}.pz-zoom-button[_ngcontent-%COMP%]:hover{opacity:.7}.pz-zoom-button.pz-zoom-control-position-right[_ngcontent-%COMP%]{right:16px;top:50%;margin-top:-28px}.pz-zoom-button.pz-zoom-control-position-right-bottom[_ngcontent-%COMP%]{right:16px;bottom:32px}.pz-zoom-button.pz-zoom-control-position-bottom[_ngcontent-%COMP%]{bottom:16px;left:50%;margin-left:-28px}.pz-zoom-control[_ngcontent-%COMP%]{position:absolute;background-color:#000c;border-radius:4px;overflow:hidden}.pz-zoom-control.pz-zoom-control-position-right[_ngcontent-%COMP%]{right:16px;top:50%;margin-top:-48px}.pz-zoom-control.pz-zoom-control-position-right-bottom[_ngcontent-%COMP%]{right:16px;bottom:32px}.pz-zoom-control.pz-zoom-control-position-bottom[_ngcontent-%COMP%]{bottom:16px;left:50%;margin-left:-48px}.pz-zoom-in[_ngcontent-%COMP%], .pz-zoom-out[_ngcontent-%COMP%]{width:48px;height:48px;background-position:center;background-repeat:no-repeat;opacity:1;cursor:pointer}.pz-zoom-in[_ngcontent-%COMP%]:hover, .pz-zoom-out[_ngcontent-%COMP%]:hover{background-color:#fff3}.pz-zoom-control-position-bottom[_ngcontent-%COMP%]   .pz-zoom-in[_ngcontent-%COMP%], .pz-zoom-control-position-bottom[_ngcontent-%COMP%]   .pz-zoom-out[_ngcontent-%COMP%]{float:right}.pz-disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.pz-disabled[_ngcontent-%COMP%]:hover{background-color:#fff0}.pz-zoom-in[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiIGlkPSJzdmdfMSIgY2xhc3M9IiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjZmZmZmZmIiBmaWxsLW9wYWNpdHk9IjEiLz48cGF0aCBkPSJNLTE1LjgzNjczNDQyMDQ2MTY1Myw0NC41MzU0MDkzMDY3MTAxOCBoNTguMjA0MDgwODI3NTkzMDkgdi02LjU3NjIyNjcyMzM2OTIyMTUgSC0xNS44MzY3MzQ0MjA0NjE2NTMgeiIgZmlsbD0ibm9uZSIgaWQ9InN2Z18yIiBjbGFzcz0iIiBzdHJva2U9Im5vbmUiLz48L2c+PC9zdmc+)}.pz-zoom-out[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE5IDEzSDV2LTJoMTR2MnoiIGlkPSJzdmdfMSIgY2xhc3M9IiIgZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIi8+PC9nPjwvc3ZnPg==)}"]}),n})(),F=(()=>{var l;class n{}return(l=n).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[v.MD]}),n})();const A=["canvas"],Y=["zoom"],B=["zoomContainer"];function x(l,n){1&l&&e.nrm(0,"ion-icon",17)}let N=(()=>{var l;class n{constructor(t,i){this.routeService=t,this.wallTemplateService=i,this.routes=[],this.activatedRoute=(0,e.WQX)(b.nX),this._discoveredHolds=[],this.schemaSize=500,this.rating=new Array(0)}ngOnInit(){var t=this;return(0,m.A)(function*(){t.id=t.activatedRoute.snapshot.paramMap.get("id");const i=yield t.routeService.getById(t.id),s=t.canvas.nativeElement;yield t.wallTemplateService.drawTemplateBackdrop(s),i&&(t.route=i,yield t.markHolds(),yield t.zoomToRoute())})()}zoomToRoute(){var t=this;return(0,m.A)(function*(){if(t._discoveredHolds&&t._discoveredHolds.length>0){let i=6e4,s=0,a=6e4,r=0;const h=HTMLDivElement=t.zoomContainer.nativeElement,d=t.canvas.nativeElement,p=d.width,M=d.height;for(const g of t._discoveredHolds)g&&(i>g.Center.X-g.Radius&&(i=Math.max(0,g.Center.X-g.Radius)),s<g.Center.X+g.Radius&&(s=Math.min(p,g.Center.X+g.Radius)),a>g.Center.Y-g.Radius&&(a=Math.max(0,g.Center.Y-g.Radius)),r<g.Center.Y+g.Radius&&(r=Math.min(M,g.Center.Y+g.Radius)));const se=Math.min(h.clientWidth/(s-i),h.clientHeight/(r-a));t.zoom.zoomControlScale=se,t.zoom.toggleZoom()}})()}markHolds(){var t=this;return(0,m.A)(function*(){for(const r of null!==(i=null===(s=t.route)||void 0===s?void 0:s.Holds)&&void 0!==i?i:[]){var i,s;const h=yield t.wallTemplateService.findHold(r.Center.X,r.Center.Y);h&&(r.Contour=h.Contour,r.MinRect=h.MinRect,r.Radius=h.Radius,t._discoveredHolds.push(r))}t.wallTemplateService.markHolds(t._discoveredHolds,null,t.canvas.nativeElement)})()}}return(l=n).\u0275fac=function(t){return new(t||l)(e.rXU(I),e.rXU(z))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-view-route"]],viewQuery:function(t,i){if(1&t&&(e.GBs(A,7),e.GBs(Y,7),e.GBs(B,7)),2&t){let s;e.mGM(s=e.lsd())&&(i.canvas=s.first),e.mGM(s=e.lsd())&&(i.zoom=s.first),e.mGM(s=e.lsd())&&(i.zoomContainer=s.first)}},decls:28,vars:14,consts:[["zoomContainer",""],["zoom",""],["canvas",""],[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],["id","zoomContainer"],[3,"limit-zoom"],["width","1500","height","700"],["id","info"],["id","rating"],["name","star-outline",4,"ngFor","ngForOf"],[1,"description"],[1,"author"],["name","star-outline"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",3)(1,"ion-toolbar")(2,"ion-buttons",4),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content",5)(7,"ion-header",6)(8,"ion-toolbar")(9,"ion-title",7),e.EFF(10),e.k0s()()(),e.j41(11,"div",8)(12,"div",9,0)(14,"pinch-zoom",10,1)(16,"canvas",11,2),e.EFF(18," Not supported on this browser "),e.k0s()()(),e.j41(19,"div",12)(20,"div",13),e.DNE(21,x,1,0,"ion-icon",14),e.k0s(),e.j41(22,"p")(23,"span",15),e.EFF(24),e.k0s()(),e.j41(25,"p")(26,"span",16),e.EFF(27),e.k0s()()()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(5),e.E5c("",null==i.route?null:i.route.Name," [ ",null==i.route?null:i.route.Difficulty," @ ",null==i.route?null:i.route.Angle,"\xb0 ] "),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(4),e.JRh(null==i.route?null:i.route.Name),e.R7$(4),e.xc7("width",i.schemaSize)("height",i.schemaSize),e.Y8G("limit-zoom",20),e.R7$(7),e.Y8G("ngForOf",i.rating),e.R7$(3),e.JRh(null==i.route?null:i.route.Description),e.R7$(3),e.SpI("by ",null==i.route?null:i.route.Autor,""))},dependencies:[v.Sq,c.QW,c.W9,c.eU,c.iq,c.MC,c.BC,c.ai,D],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#container[_ngcontent-%COMP%]   #zoomContainer[_ngcontent-%COMP%]   pinch-zoom[_ngcontent-%COMP%]{height:50em}#container[_ngcontent-%COMP%]   #rating[_ngcontent-%COMP%]{float:right}#container[_ngcontent-%COMP%]   #info[_ngcontent-%COMP%]{text-align:left;padding:1em}.author[_ngcontent-%COMP%]{font-size:.8em}"]}),n})();const O=l=>[l];function X(l,n){if(1&l&&(e.j41(0,"ion-item",9)(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-note"),e.EFF(4),e.k0s()()),2&l){const o=n.$implicit;e.Y8G("button",!0)("routerLink",e.eq3(5,O,"/routes/"+o.Id)),e.R7$(2),e.JRh(o.Name),e.R7$(2),e.Lme("",o.Difficulty," @ ",o.Angle,"\xb0")}}let G=(()=>{var l;class n{constructor(t){this.routeService=t,this.routes=[],this.routeService.getAll().then(i=>{this.routes=i})}onSelect(t){this.selectedRoute=t}}return(l=n).\u0275fac=function(t){return new(t||l)(e.rXU(I))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-list-routes"]],decls:14,vars:3,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"capitalize"],[1,"routes"],[3,"button","routerLink",4,"ngFor","ngForOf"],[3,"button","routerLink"]],template:function(t,i){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Routes"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"ion-header",3)(8,"ion-toolbar"),e.nrm(9,"ion-title",4),e.k0s()(),e.j41(10,"div",5),e.nrm(11,"strong",6),e.j41(12,"ion-list",7),e.DNE(13,X,5,7,"ion-item",8),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("ngForOf",i.routes))},dependencies:[v.Sq,c.QW,c.W9,c.eU,c.uz,c.he,c.nf,c.MC,c.JI,c.BC,c.ai,c.N7,b.Wk],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-note[_ngcontent-%COMP%]{color:var(--ion-color-primary);vertical-align:middle;font-size:.9em;font-weight:300;margin-top:1em}"]}),n})();var T=function(l){return l[l.Boulder="Boulder"]="Boulder",l[l.Route="Route"]="Route",l}(T||{}),P=function(l){return l[l.FeetFollow="FeetFollow"]="FeetFollow",l[l.OpenFeet="OpenFeet"]="OpenFeet",l[l.NoMatches="NoMatches"]="NoMatches",l}(P||{});const W=["canvas"],V=["zoom"];function U(l,n){if(1&l&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&l){const o=n.$implicit;e.FS9("value",o),e.R7$(),e.JRh(o)}}function J(l,n){if(1&l&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&l){const o=n.$implicit;e.FS9("value",o.key),e.R7$(),e.JRh(o.value)}}function $(l,n){if(1&l&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&l){const o=n.$implicit;e.FS9("value",o),e.R7$(),e.SpI("",o,"\xb0")}}function Q(l,n){if(1&l){const o=e.RV6();e.j41(0,"ion-item")(1,"ion-select",26),e.mxI("ngModelChange",function(i){e.eBV(o);const s=e.XpG();return e.DH7(s.angle,i)||(s.angle=i),e.Njj(i)}),e.DNE(2,$,2,2,"ion-select-option",15),e.k0s()()}if(2&l){const o=e.XpG();e.R7$(),e.R50("ngModel",o.angle),e.R7$(),e.Y8G("ngForOf",null==o.template?null:o.template.Angles)}}function K(l,n){if(1&l&&(e.j41(0,"ion-select-option",25),e.EFF(1),e.k0s()),2&l){const o=n.$implicit;e.FS9("value",o),e.R7$(),e.JRh(o)}}function q(l,n){if(1&l){const o=e.RV6();e.j41(0,"ion-item-sliding",27),e.bIt("click",function(){const i=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.selectHold(i))}),e.j41(1,"ion-item",28)(2,"ion-label"),e.EFF(3),e.k0s(),e.nrm(4,"ion-icon",29),e.k0s(),e.j41(5,"ion-item-options")(6,"ion-item-option",30),e.bIt("click",function(){const i=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.changeTypeStartingHold(i))}),e.EFF(7," Starting hold "),e.k0s(),e.j41(8,"ion-item-option",31),e.bIt("click",function(){const i=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.changeTypeFinishingHold(i))}),e.EFF(9," Finishing hold "),e.k0s(),e.j41(10,"ion-item-option",32),e.bIt("click",function(){const i=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.changeTypeFootHold(i))}),e.EFF(11," Foot hold "),e.k0s(),e.j41(12,"ion-item-option",33),e.bIt("click",function(){const i=e.eBV(o).$implicit,s=e.XpG();return e.Njj(s.changeTypeRegularHold(i))}),e.EFF(13," Regular hold "),e.k0s()()()}if(2&l){const o=n.$implicit;e.R7$(),e.Y8G("button",!0),e.R7$(2),e.JRh(o.Type)}}const ee=[{path:"",component:G},{path:"add",component:(()=>{var l;class n{constructor(t,i,s){this.routeService=t,this.wallTemplateService=i,this.formBuilder=s,this.template=null,this.holds=[],this._selectedHold=null,this.routeStyles=[P.FeetFollow,P.OpenFeet,P.NoMatches],this.routeTypes=[T.Boulder,T.Route],this.difficulties=new Map,this.routeStyle=P.FeetFollow,this.angle=40,this.routeType=T.Boulder,this.setDifficulty(t.boulderDifficulty)}ngOnInit(){var t=this;return(0,m.A)(function*(){var i,s,r,h;t.wallTemplateService.drawTemplateBackdrop(t.canvas.nativeElement),t.template=yield t.wallTemplateService.getTemplate(),null!==(i=null===(s=t.template)||void 0===s?void 0:s.Angles.length)&&void 0!==i&&i&&(t.angle=null!==(r=null===(h=t.template)||void 0===h?void 0:h.Angles[t.template.Angles.length/2])&&void 0!==r?r:40),t.formGroup=t.formBuilder.group({name:["",y.k0.required]})})()}isSaveDisabled(){var t=this;return(0,m.A)(function*(){return console.log(null!=t.name&&""!=t.name),null!=t.name&&""!=t.name})()}onSave(){var t=this;return(0,m.A)(function*(){console.log({routeStyle:t.routeStyle,angle:t.angle,name:t.name,description:t.description,selectedDifficulty:t.selectedDifficulty,routeType:t.routeType,holds:t.holds})})()}selectHold(t){var i=this;return(0,m.A)(function*(){i._selectedHold=t;const s=i.canvas.nativeElement;yield i.wallTemplateService.drawTemplateBackdrop(s),yield i.wallTemplateService.markHolds(i.holds,i._selectedHold,s)})()}changeRouteType(t){var i=this;return(0,m.A)(function*(){i.routeType=t.detail.value;let s=i.selectedDifficulty;i.selectedDifficulty=void 0,i.routeType===T.Route?i.setDifficulty(i.routeService.routeDifficulty):i.routeType===T.Boulder&&i.setDifficulty(i.routeService.boulderDifficulty),i.selectedDifficulty=s})()}setDifficulty(t){var i=this;return(0,m.A)(function*(){i.difficulties.clear();for(let[s,a]of t)i.difficulties.set(s,a)})()}changeTypeStartingHold(t){var i=this;return(0,m.A)(function*(){yield i.changeType(t,f.StartingHold)})()}changeTypeFinishingHold(t){var i=this;return(0,m.A)(function*(){yield i.changeType(t,f.FinishingHold)})()}changeTypeFootHold(t){var i=this;return(0,m.A)(function*(){yield i.changeType(t,f.FootHold)})()}changeTypeRegularHold(t){var i=this;return(0,m.A)(function*(){yield i.changeType(t,f.Hold)})()}changeType(t,i){var s=this;return(0,m.A)(function*(){t.Type=i;const a=s.canvas.nativeElement;yield s.wallTemplateService.drawTemplateBackdrop(a),yield s.wallTemplateService.markHolds(s.holds,s._selectedHold,a)})()}templateClick(t){var i=this;return(0,m.A)(function*(){const s=Math.min(i.wallTemplateService.width/t.target.offsetWidth,i.wallTemplateService.height/t.target.offsetHeight),a=(t.layerX+(t.target.offsetWidth-t.target.parentElement.clientWidth)/2)*s,r=(t.layerY+(t.target.offsetHeight-t.target.parentElement.clientHeight)/2)*s,h=yield i.wallTemplateService.findHold(a,r);if(h)if(h.Type=0==i.holds.length?f.StartingHold:f.Hold,i.holds.includes(h)){let p=i.holds.indexOf(h);i.holds.splice(p,1)}else i.holds.push(h);const d=i.canvas.nativeElement;yield i.wallTemplateService.drawTemplateBackdrop(d),yield i.wallTemplateService.markHolds(i.holds,i._selectedHold,d)})()}}return(l=n).\u0275fac=function(t){return new(t||l)(e.rXU(I),e.rXU(z),e.rXU(y.ok))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-add-route"]],viewQuery:function(t,i){if(1&t&&(e.GBs(W,7),e.GBs(V,7)),2&t){let s;e.mGM(s=e.lsd())&&(i.canvas=s.first),e.mGM(s=e.lsd())&&(i.zoom=s.first)}},inputs:{routeStyle:"routeStyle",angle:"angle",name:"name",description:"description",routeType:"routeType",selectedDifficulty:"selectedDifficulty"},outputs:{holds:"holds",routeStyles:"routeStyles",routeTypes:"routeTypes",difficulties:"difficulties"},decls:44,vars:16,consts:[["zoom",""],["canvas",""],[3,"translucent"],["slot","secondary"],["fill","solid","routerLink","/routes"],["name","close-circle-outline"],["slot","primary"],["fill","solid",3,"click"],["name","save-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"capitalize"],["placeholder","Select route type","interface","action-sheet",3,"ionChange","value"],[3,"value",4,"ngFor","ngForOf"],["label","Name","placeholder","Enter route name","required","true",3,"ngModelChange","ngModel"],["label","Description","placeholder","Enter route description",3,"ngModelChange","ngModel"],["label","Difficulty","placeholder","Select route difficulty","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],[4,"ngIf"],["placeholder","Select route type","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],[3,"limit-zoom"],["width","1500","height","700",3,"click"],["required","true",3,"inset"],[3,"click",4,"ngFor","ngForOf"],[3,"value"],["label","Angle","placeholder","Select board angle","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],[3,"click"],[3,"button"],["name","chevron-back-outline","slot","end"],["color","success",3,"click"],["color","danger",3,"click"],["color","warning",3,"click"],["color","light","expandable","true",3,"click"]],template:function(t,i){if(1&t){const s=e.RV6();e.j41(0,"ion-header",2)(1,"ion-toolbar")(2,"ion-buttons",3)(3,"ion-button",4),e.nrm(4,"ion-icon",5),e.EFF(5," CANCEL "),e.k0s()(),e.j41(6,"ion-buttons",6)(7,"ion-button",7),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onSave())}),e.nrm(8,"ion-icon",8),e.EFF(9," SAVE "),e.k0s()(),e.j41(10,"ion-title"),e.EFF(11,"Add new route"),e.k0s()()(),e.j41(12,"ion-content",9)(13,"ion-header",10)(14,"ion-toolbar"),e.nrm(15,"ion-title",11),e.k0s()(),e.j41(16,"div",12),e.nrm(17,"strong",13),e.j41(18,"ion-list")(19,"ion-item")(20,"ion-select",14),e.bIt("ionChange",function(r){return e.eBV(s),e.Njj(i.changeRouteType(r))}),e.DNE(21,U,2,2,"ion-select-option",15),e.k0s()(),e.j41(22,"ion-item")(23,"ion-input",16),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(i.name,r)||(i.name=r),e.Njj(r)}),e.k0s()(),e.j41(24,"ion-item")(25,"ion-textarea",17),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(i.description,r)||(i.description=r),e.Njj(r)}),e.k0s()(),e.j41(26,"ion-item")(27,"ion-select",18),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(i.selectedDifficulty,r)||(i.selectedDifficulty=r),e.Njj(r)}),e.DNE(28,J,2,2,"ion-select-option",15),e.nI1(29,"keyvalue"),e.k0s()(),e.DNE(30,Q,3,2,"ion-item",19),e.j41(31,"ion-item")(32,"ion-select",20),e.mxI("ngModelChange",function(r){return e.eBV(s),e.DH7(i.routeStyle,r)||(i.routeStyle=r),e.Njj(r)}),e.DNE(33,K,2,2,"ion-select-option",15),e.k0s()(),e.j41(34,"ion-item")(35,"pinch-zoom",21,0)(37,"canvas",22,1),e.bIt("click",function(r){return e.eBV(s),e.Njj(i.templateClick(r))}),e.EFF(39," Not supported on this browser "),e.k0s()()(),e.j41(40,"ion-list",23)(41,"ion-list-header"),e.EFF(42,"Marked holds"),e.k0s(),e.DNE(43,q,14,2,"ion-item-sliding",24),e.k0s()()()()}if(2&t){let s;e.Y8G("translucent",!0),e.R7$(12),e.Y8G("fullscreen",!0),e.R7$(8),e.Y8G("value",i.routeType),e.R7$(),e.Y8G("ngForOf",i.routeTypes),e.R7$(2),e.R50("ngModel",i.name),e.R7$(2),e.R50("ngModel",i.description),e.R7$(2),e.R50("ngModel",i.selectedDifficulty),e.R7$(),e.Y8G("ngForOf",e.bMT(29,14,i.difficulties)),e.R7$(2),e.Y8G("ngIf",(null!==(s=null==i.template||null==i.template.Angles?null:i.template.Angles.length)&&void 0!==s?s:0)>1),e.R7$(2),e.R50("ngModel",i.routeStyle),e.R7$(),e.Y8G("ngForOf",i.routeStyles),e.R7$(2),e.Y8G("limit-zoom",20),e.R7$(5),e.Y8G("inset",!0),e.R7$(3),e.Y8G("ngForOf",i.holds)}},dependencies:[v.Sq,v.bT,y.BC,y.YS,y.vS,c.Jm,c.QW,c.W9,c.eU,c.iq,c.$w,c.uz,c.LU,c.CE,c.A7,c.he,c.nf,c.AF,c.Nm,c.Ip,c.nc,c.BC,c.ai,c.Je,c.Gw,c.N7,b.Wk,D,v.lG],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#container[_ngcontent-%COMP%]   pinch-zoom[_ngcontent-%COMP%]{height:50em;margin:2em}"]}),n})()},{path:":id",component:N},{path:"login",loadChildren:()=>u.e(6688).then(u.bind(u,6688)).then(l=>l.LoginPageModule)},{path:"signup",loadChildren:()=>u.e(2789).then(u.bind(u,2789)).then(l=>l.SignupPageModule)},{path:"profile",loadChildren:()=>u.e(2373).then(u.bind(u,2373)).then(l=>l.ProfilePageModule)},{path:"not-found",loadChildren:()=>u.e(2604).then(u.bind(u,223)).then(l=>l.NotFoundPageModule)},{path:"logout",loadChildren:()=>u.e(4210).then(u.bind(u,4210)).then(l=>l.LogoutPageModule)}];let te=(()=>{var l;class n{}return(l=n).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[b.iI.forChild(ee),b.iI]}),n})(),ie=(()=>{var l;class n{}return(l=n).\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.$C({type:l}),l.\u0275inj=e.G2t({imports:[v.MD,y.YN,c.bv,te,F]}),n})()}}]);