"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6576],{7700:(T,F,a)=>{a.d(F,{S:()=>m});var m=function(_){return _[_.Hold="Hold"]="Hold",_[_.StartingHold="StartingHold"]="StartingHold",_[_.FinishingHold="FinishingHold"]="FinishingHold",_[_.FootHold="FootHold"]="FootHold",_}(m||{})},6576:(T,F,a)=>{a.r(F),a.d(F,{ListRoutesPageModule:()=>j});var m=a(177),_=a(4341),d=a(9364),b=a(8986),P=a(467),p=a(9480),t=a(4438),v=a(2167),D=a(4943);const R=o=>[o];function r(o,h){if(1&o&&(t.j41(0,"ion-item",12)(1,"ion-label"),t.EFF(2),t.k0s(),t.j41(3,"ion-note"),t.EFF(4),t.k0s()()),2&o){const n=h.$implicit;t.Y8G("button",!0)("routerLink",t.eq3(5,R,"/routes/"+n.Id)),t.R7$(2),t.JRh(n.Name),t.R7$(2),t.Lme("",n.Difficulty," @ ",n.Angle,"\xb0")}}function f(o,h){if(1&o&&(t.j41(0,"ion-select-option",23),t.EFF(1),t.k0s()),2&o){const n=h.$implicit;t.FS9("value",n),t.R7$(),t.JRh(n)}}function u(o,h){if(1&o&&(t.j41(0,"ion-select-option",23),t.EFF(1),t.k0s()),2&o){const n=h.$implicit;t.FS9("value",n.key),t.R7$(),t.JRh(n.value)}}function e(o,h){if(1&o&&(t.j41(0,"ion-select-option",23),t.EFF(1),t.k0s()),2&o){const n=h.$implicit;t.FS9("value",n.key),t.R7$(),t.JRh(n.value)}}function g(o,h){if(1&o&&(t.j41(0,"ion-select-option",23),t.EFF(1),t.k0s()),2&o){const n=h.$implicit;t.FS9("value",n),t.R7$(),t.SpI("",n,"\xb0")}}function s(o,h){if(1&o){const n=t.RV6();t.j41(0,"ion-item")(1,"ion-select",24),t.mxI("ngModelChange",function(l){t.eBV(n);const c=t.XpG(2);return t.DH7(c.angle,l)||(c.angle=l),t.Njj(l)}),t.DNE(2,g,2,2,"ion-select-option",18),t.k0s()()}if(2&o){const n=t.XpG(2);t.R7$(),t.R50("ngModel",n.angle),t.R7$(),t.Y8G("ngForOf",null==n.template?null:n.template.Angles)}}function y(o,h){if(1&o&&(t.j41(0,"ion-select-option",23),t.EFF(1),t.k0s()),2&o){const n=h.$implicit;t.FS9("value",n),t.R7$(),t.JRh(n)}}function M(o,h){if(1&o){const n=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",13)(3,"ion-button",14),t.bIt("click",function(){t.eBV(n);const l=t.XpG();return t.Njj(l.clear())}),t.EFF(4,"CLEAR"),t.k0s()(),t.j41(5,"ion-buttons",1)(6,"ion-button",15),t.bIt("click",function(){t.eBV(n);const l=t.XpG();return t.Njj(l.close())}),t.EFF(7,"CLOSE"),t.k0s()(),t.j41(8,"ion-title"),t.EFF(9,"FILTER"),t.k0s()()(),t.j41(10,"ion-content",16)(11,"ion-list")(12,"ion-item")(13,"ion-select",17),t.mxI("ngModelChange",function(l){t.eBV(n);const c=t.XpG();return t.DH7(c.routeType,l)||(c.routeType=l),t.Njj(l)}),t.DNE(14,f,2,2,"ion-select-option",18),t.k0s()(),t.j41(15,"ion-item")(16,"ion-select",19),t.mxI("ngModelChange",function(l){t.eBV(n);const c=t.XpG();return t.DH7(c.minDifficulty,l)||(c.minDifficulty=l),t.Njj(l)}),t.DNE(17,u,2,2,"ion-select-option",18),t.nI1(18,"keyvalue"),t.k0s()(),t.j41(19,"ion-item")(20,"ion-select",20),t.mxI("ngModelChange",function(l){t.eBV(n);const c=t.XpG();return t.DH7(c.maxDifficulty,l)||(c.maxDifficulty=l),t.Njj(l)}),t.DNE(21,e,2,2,"ion-select-option",18),t.nI1(22,"keyvalue"),t.k0s()(),t.DNE(23,s,3,2,"ion-item",21),t.j41(24,"ion-item")(25,"ion-select",22),t.mxI("ngModelChange",function(l){t.eBV(n);const c=t.XpG();return t.DH7(c.routeStyle,l)||(c.routeStyle=l),t.Njj(l)}),t.DNE(26,y,2,2,"ion-select-option",18),t.k0s()()()()}if(2&o){let n;const i=t.XpG();t.R7$(6),t.Y8G("strong",!0),t.R7$(7),t.R50("ngModel",i.routeType),t.R7$(),t.Y8G("ngForOf",i.routeTypes),t.R7$(2),t.R50("ngModel",i.minDifficulty),t.R7$(),t.Y8G("ngForOf",t.bMT(18,10,i.difficulties)),t.R7$(3),t.R50("ngModel",i.maxDifficulty),t.R7$(),t.Y8G("ngForOf",t.bMT(22,12,i.difficulties)),t.R7$(2),t.Y8G("ngIf",(null!==(n=null==i.template||null==i.template.Angles?null:i.template.Angles.length)&&void 0!==n?n:0)>1),t.R7$(2),t.R50("ngModel",i.routeStyle),t.R7$(),t.Y8G("ngForOf",i.routeStyles)}}const E=[{path:"",component:(()=>{var o;class h{constructor(i,l){this.routeService=i,this.wallTemplateService=l,this.routeStyles=[p.Z.FeetFollow,p.Z.OpenFeet,p.Z.NoMatches],this.routeTypes=[p.Y.Boulder,p.Y.Route],this.difficulties=new Map,this.routes=[],this.template=null,this.routeService.getAll().then(c=>{this.routes=c})}ngOnInit(){var i=this;return(0,P.A)(function*(){i.template=yield i.wallTemplateService.getTemplate(),i.difficulties.clear();for(let[C,k]of i.routeService.boulderDifficulty){var l;const I=null!==(l=i.routeService.routeDifficulty.get(C))&&void 0!==l?l:"unknown";i.difficulties.set(C,k+"/"+I)}const c=Array.from(i.difficulties.keys());i.minDifficulty=c[0],i.maxDifficulty=c[c.length-1],console.log(c[0]),console.log(c[c.length-1])})()}onSelect(i){this.selectedRoute=i}onFilter(){return(0,P.A)(function*(){})()}clear(){this.modal.dismiss(null,"clear")}close(){console.log(this.minDifficulty),console.log(this.maxDifficulty),this.modal.dismiss("ok","close")}onWillDismiss(i){}}return(o=h).\u0275fac=function(i){return new(i||o)(t.rXU(v.v),t.rXU(D.s))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-list-routes"]],viewQuery:function(i,l){if(1&i&&t.GBs(d.Sb,5),2&i){let c;t.mGM(c=t.lsd())&&(l.modal=c.first)}},inputs:{routeStyle:"routeStyle",routeType:"routeType",angle:"angle"},outputs:{routeStyles:"routeStyles",routeTypes:"routeTypes",difficulties:"difficulties"},decls:17,vars:3,consts:[[3,"translucent"],["slot","primary"],["fill","solid","id","open-filter"],["name","filter-circle-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"capitalize"],[1,"routes"],[3,"button","routerLink",4,"ngFor","ngForOf"],["trigger","open-filter",3,"willDismiss"],[3,"button","routerLink"],["slot","secondary"],[3,"click"],[3,"click","strong"],[1,"ion-padding"],["placeholder","Select route type","interface","action-sheet",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Min Difficulty","placeholder","Select minimum route difficulty","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],["label","Max Difficulty","placeholder","Select maximum route difficulty","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],[4,"ngIf"],["placeholder","Select route type","interface","action-sheet","required","true",3,"ngModelChange","ngModel"],[3,"value"],["label","Angle","placeholder","Select board angle","interface","action-sheet","required","true",3,"ngModelChange","ngModel"]],template:function(i,l){1&i&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),t.nrm(4,"ion-icon",3),t.k0s()(),t.j41(5,"ion-title"),t.EFF(6,"ROUTES"),t.k0s()()(),t.j41(7,"ion-content",4)(8,"ion-header",5)(9,"ion-toolbar"),t.nrm(10,"ion-title",6),t.k0s()(),t.j41(11,"div",7),t.nrm(12,"strong",8),t.j41(13,"ion-list",9),t.DNE(14,r,5,7,"ion-item",10),t.k0s()(),t.j41(15,"ion-modal",11),t.bIt("willDismiss",function(C){return l.onWillDismiss(C)}),t.DNE(16,M,27,14,"ng-template"),t.k0s()()),2&i&&(t.Y8G("translucent",!0),t.R7$(7),t.Y8G("fullscreen",!0),t.R7$(7),t.Y8G("ngForOf",l.routes))},dependencies:[m.Sq,m.bT,_.BC,_.YS,_.vS,d.Jm,d.QW,d.W9,d.eU,d.iq,d.uz,d.he,d.nf,d.JI,d.Nm,d.Ip,d.BC,d.ai,d.Sb,d.Je,d.N7,b.Wk,m.lG],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-note[_ngcontent-%COMP%]{color:var(--ion-color-primary);vertical-align:middle;font-size:.9em;font-weight:300;margin-top:1em}"]}),h})()}];let L=(()=>{var o;class h{}return(o=h).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[b.iI.forChild(E),b.iI]}),h})(),j=(()=>{var o;class h{}return(o=h).\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[m.MD,_.YN,d.bv,L]}),h})()},2167:(T,F,a)=>{a.d(F,{v:()=>P});var m=a(467),_=a(5312),d=a(4438);const b=_.c.api_base_uri+"boulders-5.json";let P=(()=>{var p;class t{constructor(){this.routeDifficulty=new Map,this.boulderDifficulty=new Map,this.boulderDifficulty.set(20,"3"),this.boulderDifficulty.set(25,"4-"),this.boulderDifficulty.set(30,"4"),this.boulderDifficulty.set(35,"4+"),this.boulderDifficulty.set(40,"5-"),this.boulderDifficulty.set(45,"5"),this.boulderDifficulty.set(50,"5+"),this.boulderDifficulty.set(55,"6A"),this.boulderDifficulty.set(60,"6A+"),this.boulderDifficulty.set(65,"6B"),this.boulderDifficulty.set(70,"6B+"),this.boulderDifficulty.set(75,"6C"),this.boulderDifficulty.set(80,"6C+"),this.boulderDifficulty.set(85,"7A"),this.boulderDifficulty.set(90,"7A+"),this.boulderDifficulty.set(95,"7B"),this.boulderDifficulty.set(100,"7B+"),this.boulderDifficulty.set(105,"7C"),this.boulderDifficulty.set(110,"7C+"),this.boulderDifficulty.set(115,"8A"),this.boulderDifficulty.set(120,"8A+"),this.boulderDifficulty.set(125,"8B"),this.boulderDifficulty.set(130,"8B+"),this.boulderDifficulty.set(135,"8C"),this.boulderDifficulty.set(140,"8C+"),this.boulderDifficulty.set(145,"9A"),this.routeDifficulty.set(20,"5b+"),this.routeDifficulty.set(25,"5c"),this.routeDifficulty.set(30,"5c+"),this.routeDifficulty.set(35,"6a"),this.routeDifficulty.set(40,"6a+"),this.routeDifficulty.set(45,"6b"),this.routeDifficulty.set(50,"6b+"),this.routeDifficulty.set(55,"6c"),this.routeDifficulty.set(60,"6c+"),this.routeDifficulty.set(65,"7a"),this.routeDifficulty.set(70,"7a+"),this.routeDifficulty.set(75,"7b"),this.routeDifficulty.set(80,"7b+"),this.routeDifficulty.set(85,"7c"),this.routeDifficulty.set(90,"7c+"),this.routeDifficulty.set(95,"8a"),this.routeDifficulty.set(100,"8a+"),this.routeDifficulty.set(105,"8b"),this.routeDifficulty.set(110,"8b+"),this.routeDifficulty.set(115,"8c"),this.routeDifficulty.set(120,"8c+"),this.routeDifficulty.set(125,"9a"),this.routeDifficulty.set(130,"9a+"),this.routeDifficulty.set(135,"9b"),this.routeDifficulty.set(140,"9b+"),this.routeDifficulty.set(145,"9c")}getAll(){var D=this;return(0,m.A)(function*(){var R;if(!D.routes){const r=yield fetch(b);D.routes=yield r.json()}return null!==(R=D.routes)&&void 0!==R?R:[]})()}getById(D){var R=this;return(0,m.A)(function*(){R.routes||(yield R.getAll());for(const f of null!==(r=R.routes)&&void 0!==r?r:[]){var r;if(f.Id===D)return f}return null})()}}return(p=t).\u0275fac=function(D){return new(D||p)},p.\u0275prov=d.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),t})()},4943:(T,F,a)=>{a.d(F,{s:()=>t});var m=a(467),_=a(7700),d=a(5312),b=a(4438);const P=d.c.api_base_uri+"template.json2024-04-04T19-44-35.json";let t=(()=>{var v;class D{constructor(){this._img=new Image,this._imgLoaded=!1,this._templateLoaded=!1,this.width=0,this.height=0,this._img.onload=r=>{this.width=this._img.width,this.height=this._img.height,this._imgLoaded=!0}}getTemplate(){var r=this;return(0,m.A)(function*(){var f,u,e;if(!r._template){const g=yield fetch(P);r._template=yield g.json()}return null!==(f=r._template)&&void 0!==f&&f.EncodedImage&&(r._img.src="data:image/jpeg;base64, "+(null===(e=r._template)||void 0===e?void 0:e.EncodedImage)),null!==(u=r._template)&&void 0!==u?u:null})()}markHolds(r,f,u){let e=u.getContext("2d");if(e&&r)for(let g=0;g<r.length;g++){const s=r[g];e.save(),e.beginPath(),e.moveTo(s.Contour[0].X,s.Contour[0].Y);for(let y=1;y<s.Contour.length;y++)e.lineTo(s.Contour[y].X,s.Contour[y].Y);e.lineTo(s.Contour[0].X,s.Contour[0].Y),e.closePath(),e.clip(),e.drawImage(this._img,0,0),e.restore(),e.save(),e.beginPath(),e.arc(s.Center.X,s.Center.Y,s.Radius+10,0,2*Math.PI,!0),e.closePath(),e.lineWidth=5,e.strokeStyle=s.Type==_.S.StartingHold?"#00FF00":s.Type==_.S.FinishingHold?"#FF0000":s.Type==_.S.FootHold?"#ffe066":"#00FFFF",e.stroke(),e.restore(),s==f&&(e.save(),e.beginPath(),e.arc(s.Center.X,s.Center.Y,s.Radius+20,0,2*Math.PI,!0),e.closePath(),e.lineWidth=5,e.strokeStyle=s.Type==_.S.StartingHold?"#00FF00":s.Type==_.S.FinishingHold?"#FF0000":s.Type==_.S.FootHold?"#ffe066":"#00FFFF",e.stroke(),e.restore())}}drawTemplateBackdrop(r){var f=this;return(0,m.A)(function*(){for(f._templateLoaded||(yield f.getTemplate());!f._imgLoaded;)yield new Promise(M=>setTimeout(M,500));r.width=f._img.width,r.height=f._img.height;var u=r.getContext("2d");if(u){u.save(),u.drawImage(f._img,0,0),u.restore(),u.save();for(var e=u.getImageData(0,0,f.width,f.height),g=e.data,s=0;s<g.length;s+=4){let M=.3;var y=.299*g[s]*M+.587*g[s+1]*M+.114*g[s+2]*M;g[s]=Math.round(y),g[s+1]=Math.round(y),g[s+2]=Math.round(y)}u.putImageData(e,0,0),u.restore()}})()}findHold(r,f){var u=this;return(0,m.A)(function*(){var e;if(null!==(e=u._template)&&void 0!==e&&e.Holds){var g;let M,s=null===(g=u._template)||void 0===g?void 0:g.Holds,y=null;return s.forEach(S=>{u.regionMatch(r,f,S.MinRect)&&(null==M||M>S.MinRect.Size.Width*S.MinRect.Size.Height)&&(y=S)}),y}return null})()}regionMatch(r,f,u){let e=u.Size.Width/2,g=u.Size.Height/2;return u.Center.X-e<r&&u.Center.X+e>r&&u.Center.Y-g<f&&u.Center.Y+g>f}}return(v=D).\u0275fac=function(r){return new(r||v)},v.\u0275prov=b.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}),D})()}}]);