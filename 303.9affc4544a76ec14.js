"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[303],{9480:(E,m,s)=>{s.d(m,{Y:()=>c,Z:()=>h});var c=function(i){return i[i.Boulder="Boulder"]="Boulder",i[i.Route="Route"]="Route",i}(c||{}),h=function(i){return i[i.FeetFollow="FeetFollow"]="FeetFollow",i[i.OpenFeet="OpenFeet"]="OpenFeet",i[i.NoMatches="NoMatches"]="NoMatches",i}(h||{})},303:(E,m,s)=>{s.r(m),s.d(m,{ViewRouteDetailsPageModule:()=>f});var c=s(177),h=s(4341),i=s(9364),d=s(8986),v=s(467),e=s(4438),F=s(2167);const y=()=>[];function R(t,n){1&t&&e.nrm(0,"ion-icon",15)}const l=[{path:"",component:(()=>{var t;class n{constructor(o,u){this.routeService=o,this.router=u,this.activatedRoute=(0,e.WQX)(d.nX)}ngOnInit(){var o=this;return(0,v.A)(function*(){o.id=o.activatedRoute.snapshot.paramMap.get("id");const u=yield o.routeService.getById(o.id);u?o.route=u:o.router.navigateByUrl("/not-found",{replaceUrl:!0})})()}}return(t=n).\u0275fac=function(o){return new(o||t)(e.rXU(F.v),e.rXU(d.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-route-details"]],decls:49,vars:13,consts:[[3,"translucent"],["slot","primary"],["fill","solid","routerLink","details"],["name","checkmark-outline"],["fill","solid","routerLink",".."],["name","map-outline"],["slot","start"],["fill","solid","routerLink","/routes"],["name","chevron-back-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"item-header"],["name","star-outline",4,"ngFor","ngForOf"],["name","star-outline"]],template:function(o,u){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-buttons",1)(6,"ion-button",4),e.nrm(7,"ion-icon",5),e.k0s()(),e.j41(8,"ion-title"),e.EFF(9),e.k0s(),e.j41(10,"ion-buttons",6)(11,"ion-button",7),e.nrm(12,"ion-icon",8),e.k0s()()()(),e.j41(13,"ion-content",9)(14,"ion-header",10)(15,"ion-toolbar")(16,"ion-title",11),e.EFF(17,"view-route-details"),e.k0s()()(),e.j41(18,"div",12)(19,"ion-list")(20,"ion-item")(21,"p",13),e.EFF(22,"DESCRIPTION"),e.k0s(),e.j41(23,"p"),e.EFF(24),e.k0s()(),e.j41(25,"ion-item")(26,"p",13),e.EFF(27,"BY"),e.k0s(),e.j41(28,"p"),e.EFF(29),e.k0s()(),e.j41(30,"ion-item")(31,"p",13),e.EFF(32,"DIFFICULTY"),e.k0s(),e.j41(33,"p"),e.EFF(34),e.k0s()(),e.j41(35,"ion-item")(36,"p",13),e.EFF(37,"STYLE"),e.k0s(),e.j41(38,"p"),e.EFF(39),e.k0s()(),e.j41(40,"ion-item")(41,"p",13),e.EFF(42,"SETTER'S ANGLE"),e.k0s(),e.j41(43,"p"),e.EFF(44),e.k0s()(),e.j41(45,"ion-item")(46,"p",13),e.EFF(47,"RATING"),e.k0s(),e.DNE(48,R,1,0,"ion-icon",14),e.k0s()()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(9),e.E5c("",null==u.route?null:u.route.Name," [ ",null==u.route?null:u.route.Difficulty," @ ",null==u.route?null:u.route.Angle,"\xb0 ] "),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(11),e.JRh(null==u.route?null:u.route.Description),e.R7$(5),e.JRh(null==u.route?null:u.route.Autor),e.R7$(5),e.JRh(null==u.route?null:u.route.Difficulty),e.R7$(5),e.Lme("",null==u.route?null:u.route.Type," / ",null==u.route?null:u.route.Style,""),e.R7$(5),e.SpI("",null==u.route?null:u.route.Angle,"\xb0"),e.R7$(4),e.Y8G("ngForOf",e.lJ4(12,y).constructor(null==u.route?null:u.route.Rating)))},dependencies:[c.Sq,i.Jm,i.QW,i.W9,i.eU,i.iq,i.uz,i.nf,i.BC,i.ai,i.N7,d.Wk],styles:[".item-header[_ngcontent-%COMP%]{font-size:.8em;font-weight:lighter;width:20em}"]}),n})()}];let a=(()=>{var t;class n{}return(t=n).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[d.iI.forChild(l),d.iI]}),n})(),f=(()=>{var t;class n{}return(t=n).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.MD,h.YN,i.bv,a]}),n})()},2167:(E,m,s)=>{s.d(m,{v:()=>F});var c=s(467),h=s(9480),i=s(1562),d=s(4438),v=s(2420),e=s(4796);let F=(()=>{var y;class R{constructor(l,a){this.appwrite=l,this.auth=a,this._routeCollectionId="66126500b72562898ef7",this.routeDifficulty=new Map,this.boulderDifficulty=new Map,this.holdBuffer=[],this.filter={RouteType:void 0,RouteStyle:void 0,MinDifficulty:void 0,MaxDifficulty:void 0,Angle:void 0},this.boulderDifficulty.set(20,"3"),this.boulderDifficulty.set(25,"4-"),this.boulderDifficulty.set(30,"4"),this.boulderDifficulty.set(35,"4+"),this.boulderDifficulty.set(40,"5-"),this.boulderDifficulty.set(45,"5"),this.boulderDifficulty.set(50,"5+"),this.boulderDifficulty.set(55,"6A"),this.boulderDifficulty.set(60,"6A+"),this.boulderDifficulty.set(65,"6B"),this.boulderDifficulty.set(70,"6B+"),this.boulderDifficulty.set(75,"6C"),this.boulderDifficulty.set(80,"6C+"),this.boulderDifficulty.set(85,"7A"),this.boulderDifficulty.set(90,"7A+"),this.boulderDifficulty.set(95,"7B"),this.boulderDifficulty.set(100,"7B+"),this.boulderDifficulty.set(105,"7C"),this.boulderDifficulty.set(110,"7C+"),this.boulderDifficulty.set(115,"8A"),this.boulderDifficulty.set(120,"8A+"),this.boulderDifficulty.set(125,"8B"),this.boulderDifficulty.set(130,"8B+"),this.boulderDifficulty.set(135,"8C"),this.boulderDifficulty.set(140,"8C+"),this.boulderDifficulty.set(145,"9A"),this.routeDifficulty.set(20,"5b+"),this.routeDifficulty.set(25,"5c"),this.routeDifficulty.set(30,"5c+"),this.routeDifficulty.set(35,"6a"),this.routeDifficulty.set(40,"6a+"),this.routeDifficulty.set(45,"6b"),this.routeDifficulty.set(50,"6b+"),this.routeDifficulty.set(55,"6c"),this.routeDifficulty.set(60,"6c+"),this.routeDifficulty.set(65,"7a"),this.routeDifficulty.set(70,"7a+"),this.routeDifficulty.set(75,"7b"),this.routeDifficulty.set(80,"7b+"),this.routeDifficulty.set(85,"7c"),this.routeDifficulty.set(90,"7c+"),this.routeDifficulty.set(95,"8a"),this.routeDifficulty.set(100,"8a+"),this.routeDifficulty.set(105,"8b"),this.routeDifficulty.set(110,"8b+"),this.routeDifficulty.set(115,"8c"),this.routeDifficulty.set(120,"8c+"),this.routeDifficulty.set(125,"9a"),this.routeDifficulty.set(130,"9a+"),this.routeDifficulty.set(135,"9b"),this.routeDifficulty.set(140,"9b+"),this.routeDifficulty.set(145,"9c"),this._db=new i.Lv(this.appwrite.client)}getAll(){var l=this;return(0,c.A)(function*(){let a=[],f=[];f.push(i.XK.select(["$id","Name","Difficulty","Angle","Type"])),l.filter.Angle&&f.push(i.XK.equal("Angle",[l.filter.Angle])),l.filter.RouteType&&f.push(i.XK.equal("RouteType",[l.filter.RouteType])),l.filter.RouteStyle&&f.push(i.XK.equal("RouteStyle",[l.filter.RouteStyle])),l.filter.MinDifficulty&&f.push(i.XK.greaterThanEqual("Difficulty",Number(l.filter.MinDifficulty))),l.filter.MaxDifficulty&&f.push(i.XK.lessThanEqual("Difficulty",Number(l.filter.MaxDifficulty)));const t=yield l._db.listDocuments(l.appwrite.DatabaseId,l._routeCollectionId,f);for(let r of t.documents){var n;let o=l.boulderDifficulty.get(r.Difficulty);r.Type===h.Y.Route&&(o=l.routeDifficulty.get(r.Difficulty)),a.push({Id:r.$id,Name:r.Name,Angle:r.Angle,Difficulty:null!==(n=o)&&void 0!==n?n:"unknown",Type:r.Type})}return a})()}getById(l){var a=this;return(0,c.A)(function*(){var f;const t=yield a._db.getDocument(a.appwrite.DatabaseId,a._routeCollectionId,l);let n=[];for(let o of t.Holds)n.push({Type:o.Type,Center:o.Center,MinRect:{Center:o.Center,Size:"",Angle:0},Contour:[],Radius:0});let r=a.boulderDifficulty.get(t.Difficulty);return t.Type===h.Y.Route&&(r=a.routeDifficulty.get(t.Difficulty)),{Id:t.$id,Name:t.Name,Description:t.Description,Angle:t.Angle,Difficulty:null!==(f=r)&&void 0!==f?f:"unknown",Autor:t.CreatedByName,Holds:n,Style:t.Style,Type:t.Type,Rating:5}})()}create(l,a,f,t,n,r,o,u=[]){var p=this;return(0,c.A)(function*(){const D=yield p.auth.getUser();let A=[];for(let g of o)A.push({Type:g.Type,Center:g.Center});const I=yield p._db.createDocument(p.appwrite.DatabaseId,p._routeCollectionId,i.ID.unique(),{Name:a,Description:f,Angle:n,Difficulty:t,CreatedById:D.$id,CreatedByName:D.name,Holds:A,Type:l,Style:r,FAById:D.$id,FAByName:D.name});for(const g of u){const M=g-n;let b=Number(t)+Number(M);0!=M&&(b=Math.min(b,145),b=Math.max(b,0),yield p._db.createDocument(p.appwrite.DatabaseId,p._routeCollectionId,i.ID.unique(),{Name:a,Description:f,Angle:g,Difficulty:b,CreatedById:D.$id,CreatedByName:D.name,Holds:A,Type:l,Style:r,FAById:D.$id,FAByName:D.name}))}return I.$id})()}}return(y=R).\u0275fac=function(l){return new(l||y)(d.KVO(v.k),d.KVO(e.u))},y.\u0275prov=d.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),R})()}}]);