"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[403],{403:(j,y,d)=>{d.r(y),d.d(y,{AddRouteDetailsPageModule:()=>P});var m=d(177),l=d(4341),u=d(9364),v=d(8986),g=d(467),h=d(8795),e=d(4438),R=d(3245),S=d(4943);function A(i,s){if(1&i&&(e.j41(0,"ion-select-option",19),e.EFF(1),e.k0s()),2&i){const n=s.$implicit;e.Y8G("value",n.key),e.R7$(),e.JRh(n.value)}}function D(i,s){if(1&i&&(e.j41(0,"ion-select-option",19),e.EFF(1),e.k0s()),2&i){const n=s.$implicit;e.Y8G("value",n.key),e.R7$(),e.JRh(n.value)}}function k(i,s){if(1&i&&(e.j41(0,"ion-select-option",19),e.EFF(1),e.k0s()),2&i){const n=s.$implicit;e.FS9("value",n),e.R7$(),e.SpI("",n,"\xb0")}}function T(i,s){if(1&i&&(e.j41(0,"ion-item")(1,"ion-select",20),e.DNE(2,k,2,2,"ion-select-option",13),e.k0s()()),2&i){const n=e.XpG();e.R7$(2),e.Y8G("ngForOf",null==n.template?null:n.template.Angles)}}function G(i,s){if(1&i&&(e.j41(0,"ion-select-option",19),e.EFF(1),e.k0s()),2&i){const n=s.$implicit;e.Y8G("value",n.key),e.R7$(),e.JRh(n.value)}}const $=[{path:"",component:(()=>{var i;class s{constructor(t,o,r,a){this.routeService=t,this.wallTemplateService=o,this.formBuilder=r,this.router=a,this.template=null,this.difficulties=new Map,this.routeTypes=this.routeService.routeTypes,this.routeStyles=this.routeService.routeStyles,this.formGroup=r.group({name:["",l.k0.required],description:["",l.k0.required],routeType:[this.routeService.lastRouteType,l.k0.required],difficulty:[this.routeService.lastRouteDifficulty,l.k0.required],angle:[this.routeService.lastRouteAngle,l.k0.required],routeStyle:[this.routeService.lastRouteStyle,l.k0.required]})}ngOnInit(){var t=this;return(0,g.A)(function*(){var o,r,a;t.template=yield t.wallTemplateService.getTemplate(),t.setDifficulty(t.routeService.boulderDifficulty);let f=null===(o=t.template)||void 0===o?void 0:o.Angles[0];var c,p;null!==(r=null===(a=t.template)||void 0===a?void 0:a.Angles.length)&&void 0!==r&&r&&(f=null!==(c=null===(p=t.template)||void 0===p?void 0:p.Angles[t.template.Angles.length/2])&&void 0!==c?c:40),t.formGroup=t.formBuilder.group({name:["",l.k0.required],description:["",l.k0.required],routeType:[t.routeService.lastRouteType,l.k0.required],difficulty:[t.routeService.lastRouteDifficulty,l.k0.required],angle:[t.routeService.lastRouteAngle,l.k0.required],routeStyle:[t.routeService.lastRouteStyle,l.k0.required]})})()}onSubmit(t){var o=this;return(0,g.A)(function*(){var r,a,f,c;const p=null!==(r=null===(a=o.template)||void 0===a?void 0:a.Angles)&&void 0!==r?r:[],b=yield o.routeService.create(null!==(f=null===(c=o.template)||void 0===c?void 0:c.Id)&&void 0!==f?f:"missing",t.routeType,t.name,t.description,t.difficulty,t.angle,t.routeStyle,o.routeService.holdBuffer,p);yield o.router.navigate(["/routes",{id:b}])})()}setDifficulty(t){var o=this;return(0,g.A)(function*(){o.difficulties.clear();for(let[r,a]of t)o.difficulties.set(r,a)})()}changeRouteType(t){var o=this;return(0,g.A)(function*(){const r=t.detail.value;r===h.Y.Route?o.setDifficulty(o.routeService.routeDifficulty):r===h.Y.Boulder&&o.setDifficulty(o.routeService.boulderDifficulty)})()}}return(i=s).\u0275fac=function(t){return new(t||i)(e.rXU(R.v),e.rXU(S.s),e.rXU(l.ok),e.rXU(v.Ix))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-add-route-details"]],outputs:{routeStyles:"routeStyles",routeTypes:"routeTypes",difficulties:"difficulties"},decls:36,vars:14,consts:[[3,"translucent"],["slot","primary"],["fill","solid","routerLink","/routes"],["name","close-circle-outline"],["fill","solid","routerLink","details","form","form","type","submit",3,"disabled"],["name","save-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"capitalize"],["id","form",3,"ngSubmit","formGroup"],["formControlName","routeType","placeholder","Select route type","interface","action-sheet",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","name","label","Name","placeholder","Enter route name","required","true"],["formControlName","description","label","Description","placeholder","Enter route description"],["formControlName","difficulty","label","Difficulty","placeholder","Select route difficulty","interface","action-sheet","required","true"],[4,"ngIf"],["formControlName","routeStyle","placeholder","Select route type","interface","action-sheet","required","true"],[3,"value"],["formControlName","angle","label","Angle","placeholder","Select board angle","interface","action-sheet","required","true"]],template:function(t,o){if(1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-buttons",1)(6,"ion-button",4),e.nrm(7,"ion-icon",5),e.k0s()(),e.j41(8,"ion-title"),e.EFF(9,"New route"),e.k0s()()(),e.j41(10,"ion-content",6)(11,"ion-header",7)(12,"ion-toolbar")(13,"ion-title",8),e.EFF(14,"add-route-details"),e.k0s()()(),e.j41(15,"div",9),e.nrm(16,"strong",10),e.j41(17,"form",11),e.bIt("ngSubmit",function(){return o.onSubmit(o.formGroup.value)}),e.j41(18,"ion-list")(19,"ion-item")(20,"ion-select",12),e.bIt("ionChange",function(a){return o.changeRouteType(a)}),e.DNE(21,A,2,2,"ion-select-option",13),e.nI1(22,"keyvalue"),e.k0s()(),e.j41(23,"ion-item"),e.nrm(24,"ion-input",14),e.k0s(),e.j41(25,"ion-item"),e.nrm(26,"ion-textarea",15),e.k0s(),e.j41(27,"ion-item")(28,"ion-select",16),e.DNE(29,D,2,2,"ion-select-option",13),e.nI1(30,"keyvalue"),e.k0s()(),e.DNE(31,T,3,1,"ion-item",17),e.j41(32,"ion-item")(33,"ion-select",18),e.DNE(34,G,2,2,"ion-select-option",13),e.nI1(35,"keyvalue"),e.k0s()()()()()()),2&t){let r;e.Y8G("translucent",!0),e.R7$(6),e.Y8G("disabled",!o.formGroup.valid),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",o.formGroup),e.R7$(4),e.Y8G("ngForOf",e.bMT(22,8,o.routeTypes)),e.R7$(8),e.Y8G("ngForOf",e.bMT(30,10,o.difficulties)),e.R7$(2),e.Y8G("ngIf",(null!==(r=null==o.template||null==o.template.Angles?null:o.template.Angles.length)&&void 0!==r?r:0)>1),e.R7$(3),e.Y8G("ngForOf",e.bMT(35,12,o.routeStyles))}},dependencies:[m.Sq,m.bT,l.qT,l.BC,l.cb,l.YS,u.Jm,u.QW,u.W9,u.eU,u.iq,u.$w,u.uz,u.nf,u.Nm,u.Ip,u.nc,u.BC,u.ai,u.Je,u.Gw,u.N7,v.Wk,l.j4,l.JD,m.lG]}),s})()}];let F=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[v.iI.forChild($),v.iI]}),s})(),P=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.MD,l.YN,u.bv,F,l.X1]}),s})()}}]);