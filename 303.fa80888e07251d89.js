"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[303],{1118:(b,D,r)=>{r.d(D,{Z:()=>c});var c=function(o){return o[o.FeetFollow=0]="FeetFollow",o[o.OpenFeet=1]="OpenFeet",o[o.NoMatches=2]="NoMatches",o[o.NoFeet=4]="NoFeet",o}(c||{})},8795:(b,D,r)=>{r.d(D,{Y:()=>c});var c=function(o){return o[o.Boulder=0]="Boulder",o[o.Route=1]="Route",o}(c||{})},303:(b,D,r)=>{r.r(D),r.d(D,{ViewRouteDetailsPageModule:()=>a});var c=r(177),o=r(4341),f=r(9364),y=r(8986),g=r(467),e=r(4438),v=r(2167);const F=()=>[];function h(t,s){1&t&&e.nrm(0,"ion-icon",15)}const _=[{path:"",component:(()=>{var t;class s{constructor(u,i){this.routeService=u,this.router=i,this.activatedRoute=(0,e.WQX)(y.nX)}ngOnInit(){var u=this;return(0,g.A)(function*(){u.id=u.activatedRoute.snapshot.paramMap.get("id");const i=yield u.routeService.getById(u.id);i?u.route=i:u.router.navigateByUrl("/not-found",{replaceUrl:!0})})()}}return(t=s).\u0275fac=function(u){return new(u||t)(e.rXU(v.v),e.rXU(y.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-route-details"]],decls:49,vars:13,consts:[[3,"translucent"],["slot","primary"],["fill","solid","routerLink","details"],["name","checkmark-outline"],["fill","solid","routerLink",".."],["name","map-outline"],["slot","start"],["fill","solid","routerLink","/routes"],["name","chevron-back-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container"],[1,"item-header"],["name","star-outline",4,"ngFor","ngForOf"],["name","star-outline"]],template:function(u,i){1&u&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-buttons",1)(6,"ion-button",4),e.nrm(7,"ion-icon",5),e.k0s()(),e.j41(8,"ion-title"),e.EFF(9),e.k0s(),e.j41(10,"ion-buttons",6)(11,"ion-button",7),e.nrm(12,"ion-icon",8),e.k0s()()()(),e.j41(13,"ion-content",9)(14,"ion-header",10)(15,"ion-toolbar")(16,"ion-title",11),e.EFF(17,"view-route-details"),e.k0s()()(),e.j41(18,"div",12)(19,"ion-list")(20,"ion-item")(21,"p",13),e.EFF(22,"DESCRIPTION"),e.k0s(),e.j41(23,"p"),e.EFF(24),e.k0s()(),e.j41(25,"ion-item")(26,"p",13),e.EFF(27,"BY"),e.k0s(),e.j41(28,"p"),e.EFF(29),e.k0s()(),e.j41(30,"ion-item")(31,"p",13),e.EFF(32,"DIFFICULTY"),e.k0s(),e.j41(33,"p"),e.EFF(34),e.k0s()(),e.j41(35,"ion-item")(36,"p",13),e.EFF(37,"STYLE"),e.k0s(),e.j41(38,"p"),e.EFF(39),e.k0s()(),e.j41(40,"ion-item")(41,"p",13),e.EFF(42,"SETTER'S ANGLE"),e.k0s(),e.j41(43,"p"),e.EFF(44),e.k0s()(),e.j41(45,"ion-item")(46,"p",13),e.EFF(47,"RATING"),e.k0s(),e.DNE(48,h,1,0,"ion-icon",14),e.k0s()()()()),2&u&&(e.Y8G("translucent",!0),e.R7$(9),e.E5c("",null==i.route?null:i.route.Name," [ ",null==i.route?null:i.route.Difficulty," @ ",null==i.route?null:i.route.Angle,"\xb0 ] "),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(11),e.JRh(null==i.route?null:i.route.Description),e.R7$(5),e.JRh(null==i.route?null:i.route.Autor),e.R7$(5),e.JRh(null==i.route?null:i.route.Difficulty),e.R7$(5),e.Lme("",null==i.route?null:i.route.Type," / ",null==i.route?null:i.route.Style,""),e.R7$(5),e.SpI("",null==i.route?null:i.route.Angle,"\xb0"),e.R7$(4),e.Y8G("ngForOf",e.lJ4(12,F).constructor(null==i.route?null:i.route.Rating)))},dependencies:[c.Sq,f.Jm,f.QW,f.W9,f.eU,f.iq,f.uz,f.nf,f.BC,f.ai,f.N7,y.Wk],styles:[".item-header[_ngcontent-%COMP%]{font-size:.8em;font-weight:lighter;width:20em}"]}),s})()}];let l=(()=>{var t;class s{}return(t=s).\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[y.iI.forChild(_),y.iI]}),s})(),a=(()=>{var t;class s{}return(t=s).\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.MD,o.YN,f.bv,l]}),s})()},2167:(b,D,r)=>{r.d(D,{v:()=>F});var c=r(467),o=r(1562),f=r(8795),y=r(1118),g=r(4438),e=r(2420),v=r(4796);let F=(()=>{var h;class A{constructor(l,a){this.appwrite=l,this.auth=a,this._routeCollectionId="6616dd90781920c2be2e",this.routeDifficulty=new Map,this.boulderDifficulty=new Map,this.routeStyles=new Map,this.routeTypes=new Map,this.holdBuffer=[],this.filter={RouteType:void 0,RouteStyle:void 0,MinDifficulty:void 0,MaxDifficulty:void 0,Angle:void 0},this.routeTypes.set(f.Y.Boulder,"Boulder"),this.routeTypes.set(f.Y.Route,"Route"),this.routeStyles.set(y.Z.FeetFollow,"Feet follow hands"),this.routeStyles.set(y.Z.OpenFeet,"Open feet"),this.routeStyles.set(y.Z.NoMatches,"No matching"),this.routeStyles.set(y.Z.NoFeet,"No feet / Campusing"),this.boulderDifficulty.set(20,"3"),this.boulderDifficulty.set(25,"4-"),this.boulderDifficulty.set(30,"4"),this.boulderDifficulty.set(35,"4+"),this.boulderDifficulty.set(40,"5-"),this.boulderDifficulty.set(45,"5"),this.boulderDifficulty.set(50,"5+"),this.boulderDifficulty.set(55,"6A"),this.boulderDifficulty.set(60,"6A+"),this.boulderDifficulty.set(65,"6B"),this.boulderDifficulty.set(70,"6B+"),this.boulderDifficulty.set(75,"6C"),this.boulderDifficulty.set(80,"6C+"),this.boulderDifficulty.set(85,"7A"),this.boulderDifficulty.set(90,"7A+"),this.boulderDifficulty.set(95,"7B"),this.boulderDifficulty.set(100,"7B+"),this.boulderDifficulty.set(105,"7C"),this.boulderDifficulty.set(110,"7C+"),this.boulderDifficulty.set(115,"8A"),this.boulderDifficulty.set(120,"8A+"),this.boulderDifficulty.set(125,"8B"),this.boulderDifficulty.set(130,"8B+"),this.boulderDifficulty.set(135,"8C"),this.boulderDifficulty.set(140,"8C+"),this.boulderDifficulty.set(145,"9A"),this.routeDifficulty.set(20,"5b+"),this.routeDifficulty.set(25,"5c"),this.routeDifficulty.set(30,"5c+"),this.routeDifficulty.set(35,"6a"),this.routeDifficulty.set(40,"6a+"),this.routeDifficulty.set(45,"6b"),this.routeDifficulty.set(50,"6b+"),this.routeDifficulty.set(55,"6c"),this.routeDifficulty.set(60,"6c+"),this.routeDifficulty.set(65,"7a"),this.routeDifficulty.set(70,"7a+"),this.routeDifficulty.set(75,"7b"),this.routeDifficulty.set(80,"7b+"),this.routeDifficulty.set(85,"7c"),this.routeDifficulty.set(90,"7c+"),this.routeDifficulty.set(95,"8a"),this.routeDifficulty.set(100,"8a+"),this.routeDifficulty.set(105,"8b"),this.routeDifficulty.set(110,"8b+"),this.routeDifficulty.set(115,"8c"),this.routeDifficulty.set(120,"8c+"),this.routeDifficulty.set(125,"9a"),this.routeDifficulty.set(130,"9a+"),this.routeDifficulty.set(135,"9b"),this.routeDifficulty.set(140,"9b+"),this.routeDifficulty.set(145,"9c"),this._db=new o.Lv(this.appwrite.client)}getAll(){var l=this;return(0,c.A)(function*(){let a=[],t=[];t.push(o.XK.select(["$id","Name","Difficulty","Angle","Type"])),t.push(o.XK.limit(1e5)),t.push(o.XK.orderAsc("Difficulty")),l.filter.Angle&&t.push(o.XK.equal("Angle",[l.filter.Angle])),l.filter.RouteType&&t.push(o.XK.equal("RouteType",[l.filter.RouteType])),l.filter.RouteStyle&&t.push(o.XK.equal("RouteStyle",[l.filter.RouteStyle])),l.filter.MinDifficulty&&t.push(o.XK.greaterThanEqual("Difficulty",Number(l.filter.MinDifficulty))),l.filter.MaxDifficulty&&t.push(o.XK.lessThanEqual("Difficulty",Number(l.filter.MaxDifficulty)));const s=yield l._db.listDocuments(l.appwrite.DatabaseId,l._routeCollectionId,t);for(let u of s.documents){var n;let i=l.boulderDifficulty.get(u.Difficulty);u.Type===f.Y.Route&&(i=l.routeDifficulty.get(u.Difficulty)),a.push({Id:u.$id,Name:u.Name,Angle:u.Angle,Difficulty:null!==(n=i)&&void 0!==n?n:"unknown",Type:u.Type})}return a})()}getById(l){var a=this;return(0,c.A)(function*(){var t;const s=yield a._db.getDocument(a.appwrite.DatabaseId,a._routeCollectionId,l);let n=[];for(let i of JSON.parse(s.JsonHolds))n.push({Type:i[2],Center:{X:i[0][0],Y:i[0][1]}});let u=a.boulderDifficulty.get(s.Difficulty);return s.Type===f.Y.Route&&(u=a.routeDifficulty.get(s.Difficulty)),{Id:s.$id,Name:s.Name,Description:s.Description,Angle:s.Angle,Difficulty:null!==(t=u)&&void 0!==t?t:"unknown",Autor:s.CreatedByName,Holds:n,Style:s.Style,Type:s.Type,Rating:5}})()}create(l,a,t,s,n,u,i,C,I=[]){var d=this;return(0,c.A)(function*(){const m=yield d.auth.getUser();let E=[];for(let p of C)E.push([[p.TemplateHold.Center.X,p.TemplateHold.Center.Y],p.TemplateHold.Radius,p.Type]);const M=yield d._db.createDocument(d.appwrite.DatabaseId,d._routeCollectionId,o.ID.unique(),{Name:t,Description:s,Angle:u,Difficulty:n,CreatedById:m.$id,CreatedByName:m.name,Type:a,Style:i,FAById:m.$id,FAByName:m.name,JsonHolds:JSON.stringify(E),SettersAngle:u,Wall:l});for(const p of I){const T=p-u;let R=Number(n)+Number(T);0!=T&&(R=Math.min(R,145),R=Math.max(R,0),yield d._db.createDocument(d.appwrite.DatabaseId,d._routeCollectionId,o.ID.unique(),{Name:t,Description:s,Angle:p,Difficulty:R,CreatedById:m.$id,CreatedByName:m.name,Type:a,Style:i,JsonHolds:JSON.stringify(E),SettersAngle:u,ParentId:M.$id,Wall:l}))}return d.lastRouteAngle=u,d.lastRouteDifficulty=n,d.lastRouteStyle=i,d.lastRouteType=a,M.$id})()}}return(h=A).\u0275fac=function(l){return new(l||h)(g.KVO(e.k),g.KVO(v.u))},h.\u0275prov=g.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),A})()}}]);